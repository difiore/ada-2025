<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.548">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Applied Data Analysis - 8&nbsp; Getting Data into R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./09-module.html" rel="next">
<link href="./07-module.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


<link rel="stylesheet" href="css/style.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-module.html">Part I - Using <strong><em>R</em></strong> and <strong><em>RStudio</em></strong></a></li><li class="breadcrumb-item"><a href="./08-module.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Getting Data into <strong><em>R</em></strong></span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Applied Data Analysis</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Preliminaries</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-logistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Logistics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Structure</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-course-schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Schedule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-typography-and-formatting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Typography and Formatting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-programming-style-guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programming Style Guide</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resources</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Part I - Using <strong><em>R</em></strong> and <strong><em>RStudio</em></strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Getting Started with <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Getting Started with <strong><em>RStudio</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Extending the Functionality of <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Fundamentals of the <strong><em>R</em></strong> Language</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Basics of Version Control</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Reproducible Research</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Additional Data Structures in <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-module.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Getting Data into <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Data Wrangling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Functions and Flow Control</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Part II - Statistics and Inference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Descriptive Statisics and Sampling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Probability and Distributions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Confidence Intervals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Classical Hypothesis Testing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Using Permutation Tests</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Error, Power, and Effect Size</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Introduction to Linear Modeling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Elements of Regression Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Categorical Data Analysis</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Exercises</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 01</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 02</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 03</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 04</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 05</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Assignments</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-analysis-replication-assignment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analysis Replication</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">References</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">List of Packages Used</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#objectives" id="toc-objectives" class="nav-link active" data-scroll-target="#objectives"><span class="header-section-number">8.1</span> Objectives</a></li>
  <li><a href="#preliminaries" id="toc-preliminaries" class="nav-link" data-scroll-target="#preliminaries"><span class="header-section-number">8.2</span> Preliminaries</a></li>
  <li><a href="#the-tao-of-text" id="toc-the-tao-of-text" class="nav-link" data-scroll-target="#the-tao-of-text"><span class="header-section-number">8.3</span> The Tao of Text</a></li>
  <li><a href="#working-with-local-files" id="toc-working-with-local-files" class="nav-link" data-scroll-target="#working-with-local-files"><span class="header-section-number">8.4</span> Working with Local Files</a>
  <ul class="collapse">
  <li><a href="#setting-the-path-to-a-file" id="toc-setting-the-path-to-a-file" class="nav-link" data-scroll-target="#setting-the-path-to-a-file">Setting the Path to a File</a></li>
  <li><a href="#loading-data-from-text-files" id="toc-loading-data-from-text-files" class="nav-link" data-scroll-target="#loading-data-from-text-files">Loading Data from Text Files</a></li>
  <li><a href="#loading-data-from-excel-files" id="toc-loading-data-from-excel-files" class="nav-link" data-scroll-target="#loading-data-from-excel-files">Loading Data from <strong><em>Excel</em></strong> Files</a></li>
  </ul></li>
  <li><a href="#working-with-remote-files" id="toc-working-with-remote-files" class="nav-link" data-scroll-target="#working-with-remote-files"><span class="header-section-number">8.5</span> Working with Remote Files</a>
  <ul class="collapse">
  <li><a href="#using-the-curl-package" id="toc-using-the-curl-package" class="nav-link" data-scroll-target="#using-the-curl-package">Using the {curl} Package</a></li>
  <li><a href="#using-the-readr-package" id="toc-using-the-readr-package" class="nav-link" data-scroll-target="#using-the-readr-package">Using the {readr} Package</a></li>
  <li><a href="#accessing-files-on-dropbox" id="toc-accessing-files-on-dropbox" class="nav-link" data-scroll-target="#accessing-files-on-dropbox">Accessing Files on <strong><em>Dropbox</em></strong></a></li>
  <li><a href="#accessing-files-on-box" id="toc-accessing-files-on-box" class="nav-link" data-scroll-target="#accessing-files-on-box">Accessing Files on <strong><em>Box</em></strong></a></li>
  <li><a href="#importing-data-from-google-sheets" id="toc-importing-data-from-google-sheets" class="nav-link" data-scroll-target="#importing-data-from-google-sheets">Importing Data from <strong><em>Google Sheets</em></strong></a></li>
  <li><a href="#downloading-remote-files" id="toc-downloading-remote-files" class="nav-link" data-scroll-target="#downloading-remote-files">Downloading Remote Files</a></li>
  </ul></li>
  <li><a href="#concept-review" id="toc-concept-review" class="nav-link" data-scroll-target="#concept-review">Concept Review</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-module.html">Part I - Using <strong><em>R</em></strong> and <strong><em>RStudio</em></strong></a></li><li class="breadcrumb-item"><a href="./08-module.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Getting Data into <strong><em>R</em></strong></span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="module-08" class="quarto-section-identifier"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Getting Data into <strong><em>R</em></strong></span></span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="objectives" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="objectives"><span class="header-section-number">8.1</span> Objectives</h2>
<blockquote class="blockquote">
<p>The objective of this module to learn how to download data sets from various local and online sources.</p>
</blockquote>
</section>
<section id="preliminaries" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="preliminaries"><span class="header-section-number">8.2</span> Preliminaries</h2>
<ul>
<li>GO TO: <a href="https://github.com/difiore/ada-datasets" class="uri">https://github.com/difiore/ada-datasets</a>, download the “.txt” and “.csv” versions of “Country-Data-2016”, and save them locally.</li>
</ul>
<p>This data set consists of basic statistics (area, current population size, birth rate, death rate, life expectancy, and form of government) for 249 countries taken from <a href="https://www.worlddata.info">WorldData.info</a> that I have combined with data from the International Union for the Conservation of Nature (IUCN)’s <a href="http://www.iucnredlist.org/about/summary-statistics">Red List Summary Statistics</a> about the number of threatened animal species by country.</p>
<ul>
<li>From the same page, download each of the “.txt”, “.csv”, and “.xlsx” versions of “CPDS-1960-2014-reduced”.</li>
</ul>
<p>These files contain a version of the <strong>Comparative Political Data Set (CPDS)</strong>, which is “a collection of political and institutional country-level data provided by Prof.&nbsp;Dr.&nbsp;Klaus Armingeon and collaborators at the University of Berne. The dataset consists of annual data for 36 democratic countries for the period of 1960 to 2014 or since their transition to democracy” (Armingeon et al.&nbsp;2016). The full dataset consists of 300 variables, which I have pared down to a smaller set of economical and population size variables.</p>
<blockquote class="blockquote">
<p><strong>CITATION:</strong> Armingeon K, Isler C, Knöpfel L, Weisstanner D, and Engler S. 2016. Comparative Political Data Set 1960-2014. Bern: Institute of Political Science, University of Berne.</p>
</blockquote>
<ul>
<li>Install these packages in <strong><em>R</em></strong>: <a href="https://cran.r-project.org/web/packages/readxl/readxl.pdf">{readxl}</a>, <a href="https://cran.r-project.org/web/packages/XLConnect/XLConnect.pdf">{XLConnect}</a>, <a href="https://cran.r-project.org/web/packages/gdata/gdata.pdf">{gdata}</a>, <a href="https://cran.r-project.org/web/packages/xlsx/xlsx.pdf">{xlsx}</a>, <a href="https://cran.r-project.org/web/packages/curl/curl.pdf">{curl}</a>, <a href="https://cran.r-project.org/web/packages/rdrop2/rdrop2.pdf">{rdrop2}</a>, <a href="https://cran.r-project.org/web/packages/repmis/repmis.pdf">{repmis}</a>, <a href="https://cran.r-project.org/web/packages/googlesheets4/googlesheets4.pdf">{googlesheets4}</a>, and <a href="https://cran.r-project.org/web/packages/googledrive/googledrive.pdf">{googledrive}</a></li>
<li>Load {tidyverse}</li>
</ul>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> Some of these packages (e.g., {XLConnect}, {xlsx}) require that your computer has a Java Runtime Environment (JRE) installed. A JRE is a bundle of software contaiing an interpreter and compiler for <strong>Java</strong> code, which is used to implement some of the functionality in the package. If your computer does not already have a JRE installed, you will need to also install one before being able to use these packages. You can download a JRE from Oracle’s <a href="https://www.java.com/en/">Java website</a>.</p>
</blockquote>
</section>
<section id="the-tao-of-text" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="the-tao-of-text"><span class="header-section-number">8.3</span> The Tao of Text</h2>
<p>So far, we have seen how to create a variety of data structures by hand (e.g., using the <code>c()</code> function), but for larger data sets we will need mechanisms to import data into <strong><em>R</em></strong>. There are many methods for importing tabular data, stored in various formats (like text files, spreadsheets, and databases).</p>
<p>Plain text files are, arguably, the very best way to store data (and scripts and other documents) as they are a standard format that has been around longer than most operating systems and are unlikely to change anytime soon. Some of the benefits of using text files are listed below:</p>
<ul>
<li>Plain text does not have a version and does not age.</li>
<li>Plain text files are platform and software agnostic.</li>
<li>Plain text files can be opened by a wide variety of programs.</li>
<li>Plain text can easily be copied and pasted into a wide range of software.</li>
<li>Plain text files tend to be smaller and quicker to open then proprietary formats.</li>
<li>Plain text files are easy to transmit over the web.</li>
<li>Many mature and efficient software tools exist for indexing, parsing, searching, and modifying text.</li>
<li>The content of plain text files looks the same on any system.</li>
<li>Various flavors of <strong>Markdown</strong> can be used for styling plain text files, if needed.</li>
<li>Plain text remains itself outside of the digital context.</li>
<li><strong>CAVEAT:</strong> With text, we do have to think about the sometimes gnarly issue of text encoding. See <a href="http://kunststube.net/encoding/">this article</a> or <a href="cheatsheet/encodings.pdf">this pdf</a> for a nice overview of the issues.</li>
</ul>
<blockquote class="blockquote">
<p><strong>TL/DR</strong>: Work with UTF-8 encoding whenever you can!</p>
</blockquote>
<p><br></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/spreadsheets.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="working-with-local-files" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="working-with-local-files"><span class="header-section-number">8.4</span> Working with Local Files</h2>
<section id="setting-the-path-to-a-file" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="setting-the-path-to-a-file">Setting the Path to a File</h3>
<p>The <code>file.choose()</code> command is a useful command for interactive engagement with <strong><em>R</em></strong>. It gives you a familiar operating system-specific dialog box and allows you to select a file. You can use this to specify the path to a locally-stored file. The code below will assign the variable <strong>f</strong> to the full path to the file you choose.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">file.choose</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Alternatively, you can directly assign a variable, e.g., <strong>f</strong>, to be the path to a locally-stored file. The file paths below refer to where I have saved the data files I downloaded - in a folder called <code>data/</code> within my working directory. You may need to change this path if you have saved downloaded data to a different location on your computer.</p>
</section>
<section id="loading-data-from-text-files" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="loading-data-from-text-files">Loading Data from Text Files</h3>
<p>In <strong><em>R</em></strong>, we can load a data set from a several types of plain text file stored on a local computer using the <code>read.table()</code> function from the {base} package, with the path to the file as the first (<code>file="&lt;path&gt;"</code>) argument for the function. An additional argument (<code>header=&lt;boolean&gt;</code>) can be used to specify whether the first row of the data file consists of column/field names.</p>
<p>The generic <code>read.table()</code> function can be used to read data files where columns are separated by tabs, commas, white space, or some other delimiter. The <code>sep=</code> argument tells <strong><em>R</em></strong> what character is used as a delimiter. The <code>skip=</code> argument can be used to start reading a file after a set number of rows.</p>
<p>There are format-specific variants of <code>read.table()</code> (e.g., <code>read.csv()</code>) that have different defaults and may be quicker for certain file types. Note that, as mentioned in <a href="07-module.html"><strong>Module 07</strong></a>, when using this function from the {base} package, the argument <code>stringsAsFactors=</code> is set to be TRUE by default, and we need to set it as FALSE if we want character strings to be loaded as actual strings.</p>
<p>As an example, we will read in some of the data sets that you have copied and stored locally in the files “CPDS-1960-2014-reduced.csv” and “CPDS-1960-2014-reduced.txt”.</p>
<section id="reading-comma-separated-.csv-text-files-with-base-r" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="reading-comma-separated-.csv-text-files-with-base-r">Reading comma-separated (“.csv”) text files with {base} <strong><em>R</em></strong></h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"data/CPDS-1960-2014-reduced.csv"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.table</span>(f, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)  <span class="co"># shows the first 6 lines of data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   year   country gov_right1 gov_cent1 gov_left1 gov_party      elect vturn
## 1 1960 Australia        100         0         0         1             95.5
## 2 1961 Australia        100         0         0         1 09/12/1961  95.3
## 3 1962 Australia        100         0         0         1             95.3
## 4 1963 Australia        100         0         0         1 30/11/1963  95.7
## 5 1964 Australia        100         0         0         1             95.7
## 6 1965 Australia        100         0         0         1             95.7
##   womenpar realgdpgr inflation debt_hist deficit ttl_labf labfopar unemp
## 1        0        NA      3.73     40.15    0.46  4215.00       NA  1.25
## 2        0     -0.64      2.29     38.62   -0.36  4286.00       NA  2.46
## 3        0      5.77     -0.32     38.75   -0.79  4382.00       NA  2.32
## 4        0      6.01      0.64     37.34   -0.51  4484.00       NA  1.87
## 5        0      6.26      2.87     35.31   -0.08  4610.80    67.24  1.45
## 6        0      4.99      3.41     53.99   -0.73  4745.95    67.66  1.36
##       pop pop15_64 pop65 elderly
## 1 10275.0   6296.5 874.9    8.51
## 2 10508.2   6428.6 894.6    8.51
## 3 10700.5   6571.5 913.6    8.54
## 4 10906.9   6710.9 933.0    8.55
## 5 11121.6   6857.3 948.1    8.52
## 6 11340.9   7014.6 966.3    8.52</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> You can use a second argument to the <code>head()</code> function to return a specified number of lines, e.g., <code>head(d, 10)</code>. You can also use bracket notation to display a certain range of lines, e.g., <code>head(d)[11:20]</code>.</p>
</blockquote>
<p>Or, alternatively…</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(f, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   year   country gov_right1 gov_cent1 gov_left1 gov_party      elect vturn
## 1 1960 Australia        100         0         0         1             95.5
## 2 1961 Australia        100         0         0         1 09/12/1961  95.3
## 3 1962 Australia        100         0         0         1             95.3
## 4 1963 Australia        100         0         0         1 30/11/1963  95.7
## 5 1964 Australia        100         0         0         1             95.7
## 6 1965 Australia        100         0         0         1             95.7
##   womenpar realgdpgr inflation debt_hist deficit ttl_labf labfopar unemp
## 1        0        NA      3.73     40.15    0.46  4215.00       NA  1.25
## 2        0     -0.64      2.29     38.62   -0.36  4286.00       NA  2.46
## 3        0      5.77     -0.32     38.75   -0.79  4382.00       NA  2.32
## 4        0      6.01      0.64     37.34   -0.51  4484.00       NA  1.87
## 5        0      6.26      2.87     35.31   -0.08  4610.80    67.24  1.45
## 6        0      4.99      3.41     53.99   -0.73  4745.95    67.66  1.36
##       pop pop15_64 pop65 elderly
## 1 10275.0   6296.5 874.9    8.51
## 2 10508.2   6428.6 894.6    8.51
## 3 10700.5   6571.5 913.6    8.54
## 4 10906.9   6710.9 933.0    8.55
## 5 11121.6   6857.3 948.1    8.52
## 6 11340.9   7014.6 966.3    8.52</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(d)  <span class="co"># shows the last 6 lines of data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##      year country gov_right1 gov_cent1 gov_left1 gov_party      elect vturn
## 1573 2009     USA      16.36     83.64         0         1             53.2
## 1574 2010     USA      11.76     88.24         0         1 02/11/2010  39.8
## 1575 2011     USA       8.80     91.20         0         1             39.8
## 1576 2012     USA       5.88     94.12         0         1 06/11/2012  50.9
## 1577 2013     USA       5.88     94.12         0         1             50.9
## 1578 2014     USA       8.40     91.60         0         1 04/11/2014  35.6
##      womenpar realgdpgr inflation debt_hist deficit ttl_labf labfopar unemp
## 1573     16.8     -2.78     -0.36     93.47  -12.83 155454.0    75.49   9.3
## 1574     16.8      2.53      1.64    102.66  -12.18 155220.3    74.80   9.6
## 1575     16.8      1.60      3.16    108.25  -10.75 154949.3    74.12   8.9
## 1576     18.0      2.22      2.07    111.48   -9.00 156368.6    74.53   8.1
## 1577     17.8      1.49      1.46    111.45   -5.49 156761.2    74.41   7.4
## 1578     19.3      2.43      1.62    111.70   -5.13 157268.8       NA   6.2
##           pop pop15_64    pop65 elderly
## 1573 306771.5 206060.8 39623.18   12.92
## 1574 309347.1 207665.3 40479.35   13.09
## 1575 311721.6 209179.2 41366.63   13.27
## 1576 314112.1 209823.0 43164.91   13.74
## 1577 316498.0 210673.5 44723.04   14.13
## 1578 318857.0 211545.9 46243.21   14.50</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(d)  <span class="co"># shows that tables are typically loaded in as data frames</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "data.frame"</code></pre>
</div>
</div>
</section>
<section id="reading-tab-separated-.tsv-.txt-text-files-with-base-r" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="reading-tab-separated-.tsv-.txt-text-files-with-base-r">Reading tab-separated (“.tsv”, “.txt”) text files with {base} <strong><em>R</em></strong></h4>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> In the following snippet, you can change the <code>sep=</code> argument as needed to use other delimiters</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"data/CPDS-1960-2014-reduced.txt"</span>  <span class="co"># specfies a local path</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.table</span>(f, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">"</span><span class="sc">\t</span><span class="st">"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># if fill is left as the default (FALSE) then this will throw an error...  if</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># TRUE then if the rows have unequal length, blank fields are implicitly added</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)  <span class="co"># shows the first 6 lines of data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   year   country gov_right1 gov_cent1 gov_left1 gov_party      elect vturn
## 1 1960 Australia        100         0         0         1             95.5
## 2 1961 Australia        100         0         0         1 09/12/1961  95.3
## 3 1962 Australia        100         0         0         1             95.3
## 4 1963 Australia        100         0         0         1 30/11/1963  95.7
## 5 1964 Australia        100         0         0         1             95.7
## 6 1965 Australia        100         0         0         1             95.7
##   womenpar realgdpgr inflation debt_hist deficit ttl_labf labfopar unemp
## 1        0        NA      3.73     40.15    0.46  4215.00       NA  1.25
## 2        0     -0.64      2.29     38.62   -0.36  4286.00       NA  2.46
## 3        0      5.77     -0.32     38.75   -0.79  4382.00       NA  2.32
## 4        0      6.01      0.64     37.34   -0.51  4484.00       NA  1.87
## 5        0      6.26      2.87     35.31   -0.08  4610.80    67.24  1.45
## 6        0      4.99      3.41     53.99   -0.73  4745.95    67.66  1.36
##       pop pop15_64 pop65 elderly
## 1 10275.0   6296.5 874.9    8.51
## 2 10508.2   6428.6 894.6    8.51
## 3 10700.5   6571.5 913.6    8.54
## 4 10906.9   6710.9 933.0    8.55
## 5 11121.6   6857.3 948.1    8.52
## 6 11340.9   7014.6 966.3    8.52</code></pre>
</div>
</div>
<p>Or, alternatively…</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(f, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># for the `read.delim()` function, fill=TRUE by default</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   year   country gov_right1 gov_cent1 gov_left1 gov_party      elect vturn
## 1 1960 Australia        100         0         0         1             95.5
## 2 1961 Australia        100         0         0         1 09/12/1961  95.3
## 3 1962 Australia        100         0         0         1             95.3
## 4 1963 Australia        100         0         0         1 30/11/1963  95.7
## 5 1964 Australia        100         0         0         1             95.7
## 6 1965 Australia        100         0         0         1             95.7
##   womenpar realgdpgr inflation debt_hist deficit ttl_labf labfopar unemp
## 1        0        NA      3.73     40.15    0.46  4215.00       NA  1.25
## 2        0     -0.64      2.29     38.62   -0.36  4286.00       NA  2.46
## 3        0      5.77     -0.32     38.75   -0.79  4382.00       NA  2.32
## 4        0      6.01      0.64     37.34   -0.51  4484.00       NA  1.87
## 5        0      6.26      2.87     35.31   -0.08  4610.80    67.24  1.45
## 6        0      4.99      3.41     53.99   -0.73  4745.95    67.66  1.36
##       pop pop15_64 pop65 elderly
## 1 10275.0   6296.5 874.9    8.51
## 2 10508.2   6428.6 894.6    8.51
## 3 10700.5   6571.5 913.6    8.54
## 4 10906.9   6710.9 933.0    8.55
## 5 11121.6   6857.3 948.1    8.52
## 6 11340.9   7014.6 966.3    8.52</code></pre>
</div>
</div>
</section>
<section id="reading-text-files-with-the-readr-package" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="reading-text-files-with-the-readr-package">Reading text files with the {readr} package</h4>
<p>The {readr} package, which is loaded as part of {tidyverse} provides easy alternative functions to read in delimited text files. It runs faster than the {base} package functions. It begins by reading in an initial set of rows (a default number of 1000) from the table and then tries to impute the data class of each column. If you want, you can also directly specify the data class of each column with the <code>col_types()</code> function. The <code>col_names=&lt;boolean&gt;</code> argument is used to specify if your data has a header row.</p>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> There are variants of the main <code>read_&lt;type&gt;()</code> function for different types of files, e.g., tab-separated values (<code>read_tsv()</code>), comma-separated values (<code>read_csv()</code>), those with some other delimiter (<code>read_delim()</code>). A few common delimiters that might be used in text files are commas (<code>,</code>), tabs (<code>\t</code>), semicolons (<code>;</code>), and end-of-line characters, e.g., “new lines” (<code>\n</code>) or “carriage returns” (<code>\r</code>).</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"data/CPDS-1960-2014-reduced.txt"</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(f, <span class="at">col_names =</span> <span class="cn">TRUE</span>)  <span class="co"># for tab-separated value files</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 6 × 20
##    year country   gov_right1 gov_cent1 gov_left1 gov_party elect  vturn womenpar
##   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;    &lt;dbl&gt;
## 1  1960 Australia        100         0         0         1 &lt;NA&gt;    95.5        0
## 2  1961 Australia        100         0         0         1 09/12…  95.3        0
## 3  1962 Australia        100         0         0         1 &lt;NA&gt;    95.3        0
## 4  1963 Australia        100         0         0         1 30/11…  95.7        0
## 5  1964 Australia        100         0         0         1 &lt;NA&gt;    95.7        0
## 6  1965 Australia        100         0         0         1 &lt;NA&gt;    95.7        0
## # ℹ 11 more variables: realgdpgr &lt;dbl&gt;, inflation &lt;dbl&gt;, debt_hist &lt;dbl&gt;,
## #   deficit &lt;dbl&gt;, ttl_labf &lt;dbl&gt;, labfopar &lt;dbl&gt;, unemp &lt;dbl&gt;, pop &lt;dbl&gt;,
## #   pop15_64 &lt;dbl&gt;, pop65 &lt;dbl&gt;, elderly &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "spec_tbl_df" "tbl_df"      "tbl"         "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns d as a data frame, but also as a 'tibble' note the output is more</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># verbose and the problems() function highlights where there might have been</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># parsing errors</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Or, alternatively…</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(f, <span class="at">delim =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># for generic delimited files, where the delimiter is a tab ('\t')</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 6 × 1
##   year\tcountry\tgov_right1\tgov_cent1\tgov_left1\tgov_party\telect\tvturn\two…¹
##   &lt;chr&gt;                                                                         
## 1 "1960\tAustralia\t100.00\t0.00\t0.00\t1\t\t95.5\t0.0\t\t3.73\t40.15\t0.46\t42…
## 2 "1961\tAustralia\t100.00\t0.00\t0.00\t1\t09/12/1961\t95.3\t0.0\t-0.64\t2.29\t…
## 3 "1962\tAustralia\t100.00\t0.00\t0.00\t1\t\t95.3\t0.0\t5.77\t-0.32\t38.75\t-0.…
## 4 "1963\tAustralia\t100.00\t0.00\t0.00\t1\t30/11/1963\t95.7\t0.0\t6.01\t0.64\t3…
## 5 "1964\tAustralia\t100.00\t0.00\t0.00\t1\t\t95.7\t0.0\t6.26\t2.87\t35.31\t-0.0…
## 6 "1965\tAustralia\t100.00\t0.00\t0.00\t1\t\t95.7\t0.0\t4.99\t3.41\t53.99\t-0.7…
## # ℹ abbreviated name:
## #   ¹​`year\tcountry\tgov_right1\tgov_cent1\tgov_left1\tgov_party\telect\tvturn\twomenpar\trealgdpgr\tinflation\tdebt_hist\tdeficit\tttl_labf\tlabfopar\tunemp\tpop\tpop15_64\tpop65\telderly`</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"data/CPDS-1960-2014-reduced.csv"</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(f, <span class="at">col_names =</span> <span class="cn">TRUE</span>)  <span class="co"># for comma-separated value files</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>## Rows: 1578 Columns: 20
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr  (2): country, elect
## dbl (18): year, gov_right1, gov_cent1, gov_left1, gov_party, vturn, womenpar...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 6 × 20
##    year country   gov_right1 gov_cent1 gov_left1 gov_party elect  vturn womenpar
##   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;    &lt;dbl&gt;
## 1  1960 Australia        100         0         0         1 &lt;NA&gt;    95.5        0
## 2  1961 Australia        100         0         0         1 09/12…  95.3        0
## 3  1962 Australia        100         0         0         1 &lt;NA&gt;    95.3        0
## 4  1963 Australia        100         0         0         1 30/11…  95.7        0
## 5  1964 Australia        100         0         0         1 &lt;NA&gt;    95.7        0
## 6  1965 Australia        100         0         0         1 &lt;NA&gt;    95.7        0
## # ℹ 11 more variables: realgdpgr &lt;dbl&gt;, inflation &lt;dbl&gt;, debt_hist &lt;dbl&gt;,
## #   deficit &lt;dbl&gt;, ttl_labf &lt;dbl&gt;, labfopar &lt;dbl&gt;, unemp &lt;dbl&gt;, pop &lt;dbl&gt;,
## #   pop15_64 &lt;dbl&gt;, pop65 &lt;dbl&gt;, elderly &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Or, alternatively…</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(f, <span class="at">delim =</span> <span class="st">","</span>, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>## Rows: 1578 Columns: 20
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr  (2): country, elect
## dbl (18): year, gov_right1, gov_cent1, gov_left1, gov_party, vturn, womenpar...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># for generic delimited files, where the delimiter is a comma</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 6 × 20
##    year country   gov_right1 gov_cent1 gov_left1 gov_party elect  vturn womenpar
##   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;    &lt;dbl&gt;
## 1  1960 Australia        100         0         0         1 &lt;NA&gt;    95.5        0
## 2  1961 Australia        100         0         0         1 09/12…  95.3        0
## 3  1962 Australia        100         0         0         1 &lt;NA&gt;    95.3        0
## 4  1963 Australia        100         0         0         1 30/11…  95.7        0
## 5  1964 Australia        100         0         0         1 &lt;NA&gt;    95.7        0
## 6  1965 Australia        100         0         0         1 &lt;NA&gt;    95.7        0
## # ℹ 11 more variables: realgdpgr &lt;dbl&gt;, inflation &lt;dbl&gt;, debt_hist &lt;dbl&gt;,
## #   deficit &lt;dbl&gt;, ttl_labf &lt;dbl&gt;, labfopar &lt;dbl&gt;, unemp &lt;dbl&gt;, pop &lt;dbl&gt;,
## #   pop15_64 &lt;dbl&gt;, pop65 &lt;dbl&gt;, elderly &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
</section>
<section id="loading-data-from-excel-files" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="loading-data-from-excel-files">Loading Data from <strong><em>Excel</em></strong> Files</h3>
<p>While you should never need to use <strong><em>Excel</em></strong>, sometimes you will no doubt be given a spreadsheet file with some data in it that you want to read in <strong><em>R</em></strong>. There are several packages available that provide functions for loading data into <strong><em>R</em></strong> from <strong><em>Excel</em></strong> spreadsheet files: {readxl}, {XLConnect}, and {xlsx}. The first two of these are fast, easy to use, and work well. Both require that you have successfully installed {rJava} on your computer, which both packages import as a dependency. Be warned, sometimes installing {rJava} can be tricky! {xlsx} also may be slower than the other methods, but its <code>read.xlsx2()</code> function may improve the speed.</p>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> You shoud always use <code>str()</code> to check if your variables come in as the correct data class!</p>
</blockquote>
<section id="using-the-readxl-package" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="using-the-readxl-package">Using the {readxl} package</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"data/CPDS-1960-2014-reduced.xlsx"</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(f, <span class="at">sheet =</span> <span class="dv">1</span>, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 6 × 20
##    year country   gov_right1 gov_cent1 gov_left1 gov_party elect              
##   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dttm&gt;             
## 1  1960 Australia        100         0         0         1 NA                 
## 2  1961 Australia        100         0         0         1 1961-12-09 00:00:00
## 3  1962 Australia        100         0         0         1 NA                 
## 4  1963 Australia        100         0         0         1 1963-11-30 00:00:00
## 5  1964 Australia        100         0         0         1 NA                 
## 6  1965 Australia        100         0         0         1 NA                 
## # ℹ 13 more variables: vturn &lt;dbl&gt;, womenpar &lt;dbl&gt;, realgdpgr &lt;dbl&gt;,
## #   inflation &lt;dbl&gt;, debt_hist &lt;dbl&gt;, deficit &lt;dbl&gt;, ttl_labf &lt;dbl&gt;,
## #   labfopar &lt;dbl&gt;, unemp &lt;dbl&gt;, pop &lt;dbl&gt;, pop15_64 &lt;dbl&gt;, pop65 &lt;dbl&gt;,
## #   elderly &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d)  <span class="co"># `read_excel()` yields a 'tibble'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## tibble [1,578 × 20] (S3: tbl_df/tbl/data.frame)
##  $ year      : num [1:1578] 1960 1961 1962 1963 1964 ...
##  $ country   : chr [1:1578] "Australia" "Australia" "Australia" "Australia" ...
##  $ gov_right1: num [1:1578] 100 100 100 100 100 100 100 100 100 100 ...
##  $ gov_cent1 : num [1:1578] 0 0 0 0 0 0 0 0 0 0 ...
##  $ gov_left1 : num [1:1578] 0 0 0 0 0 0 0 0 0 0 ...
##  $ gov_party : num [1:1578] 1 1 1 1 1 1 1 1 1 1 ...
##  $ elect     : POSIXct[1:1578], format: NA "1961-12-09" ...
##  $ vturn     : num [1:1578] 95.5 95.3 95.3 95.7 95.7 95.7 95.1 95.1 95.1 95 ...
##  $ womenpar  : num [1:1578] 0 0 0 0 0 0 0.8 0.8 0.8 0 ...
##  $ realgdpgr : num [1:1578] NA -0.643 5.767 6.009 6.258 ...
##  $ inflation : num [1:1578] 3.729 2.288 -0.319 0.641 2.866 ...
##  $ debt_hist : num [1:1578] 40.1 38.6 38.7 37.3 35.3 ...
##  $ deficit   : num [1:1578] 0.4582 -0.3576 -0.7938 -0.5062 -0.0804 ...
##  $ ttl_labf  : num [1:1578] 4215 4286 4382 4484 4611 ...
##  $ labfopar  : num [1:1578] NA NA NA NA 67.2 ...
##  $ unemp     : num [1:1578] 1.25 2.46 2.32 1.87 1.45 ...
##  $ pop       : num [1:1578] 10275 10508 10700 10907 11122 ...
##  $ pop15_64  : num [1:1578] 6296 6429 6572 6711 6857 ...
##  $ pop65     : num [1:1578] 875 895 914 933 948 ...
##  $ elderly   : num [1:1578] 8.51 8.51 8.54 8.55 8.52 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>readxl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="using-the-xlconnect-package" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="using-the-xlconnect-package">Using the {XLConnect} package</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(XLConnect)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"data/CPDS-1960-2014-reduced.xlsx"</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">readWorksheetFromFile</span>(f, <span class="at">sheet =</span> <span class="dv">1</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The {XLConnect} package can also write data frames back out to <strong><em>Excel</em></strong> worksheets. If the file does not exist, it is created. If it does exist, data is cleared and overwritten. The second process is MUCH slower. In the following, I have included a conditional statement (<code>if(){}</code>) which will implement the <code>file.remove()</code> command here, if needed.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"output.xlsx"</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(f)) {</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.remove</span>(f)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fu">writeWorksheetToFile</span>(f, d, <span class="at">sheet =</span> <span class="st">"myData"</span>, <span class="at">clearSheets =</span> <span class="cn">TRUE</span>)</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>XLConnect)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For futher information on using {XLConnect} check out <a href="http://altons.github.io/r/2015/02/13/quick-intro-to-xlconnect/#worksheet">this blog post</a>.</p>
</section>
<section id="using-the-xlsx-package" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="using-the-xlsx-package">Using the {xlsx} package</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xlsx)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"data/CPDS-1960-2014-reduced.xlsx"</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.xlsx</span>(f, <span class="at">sheetIndex =</span> <span class="dv">1</span>)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co"># or pass a named sheet using the argument `sheetIndex=` the function</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co"># `read.xlsx2()` is an updated alternative from the same package and may run</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co"># faster</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>xlsx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><strong>TL/DR</strong>: {readxl} seems to be the best package for <em>reading</em> <strong><em>Excel</em></strong> data, but you might need other packages and functions to <em>write</em> native <strong><em>Excel</em></strong> files (“.xls” or “.xlsx”).</p>
</blockquote>
</section>
</section>
</section>
<section id="working-with-remote-files" class="level2" data-number="8.5">
<h2 data-number="8.5" class="anchored" data-anchor-id="working-with-remote-files"><span class="header-section-number">8.5</span> Working with Remote Files</h2>
<p>We can also use <strong><em>R</em></strong> as an interface to work with data and files stored on a server elsewhere on the web, e.g., <strong><em>Dropbox</em></strong>, <strong><em>GitHub</em></strong>, or <strong><em>Google Drive</em></strong>.</p>
<p>To read “.csv” or “.txt” files directly from <strong><em>GitHub</em></strong>, use the {curl} or {readr} packages.</p>
<p>GO TO: <a href="https://github.com/difiore/ada-datasets" class="uri">https://github.com/difiore/ada-datasets</a>, select the “.csv” version of the “CPDS-1960-2014-reduced” file, then press “RAW” and copy the <strong>URL</strong> from the address box of your browser window… this is what you need to use as an argument for the functions below (you will repeat this for the “.txt” version later on)</p>
<section id="using-the-curl-package" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="using-the-curl-package">Using the {curl} Package</h3>
<p>The {curl} package lets us open connection across the internet to read data from a URL, which we can then couple with one of the {base} <code>read.table()</code> functions.</p>
<p>For a comma-separated value (“.csv”) text file…</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(curl)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">curl</span>(<span class="st">"https://raw.githubusercontent.com/difiore/ada-datasets/main/CPDS-1960-2014-reduced.csv"</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(f, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   year   country gov_right1 gov_cent1 gov_left1 gov_party      elect vturn
## 1 1960 Australia        100         0         0         1             95.5
## 2 1961 Australia        100         0         0         1 09/12/1961  95.3
## 3 1962 Australia        100         0         0         1             95.3
## 4 1963 Australia        100         0         0         1 30/11/1963  95.7
## 5 1964 Australia        100         0         0         1             95.7
## 6 1965 Australia        100         0         0         1             95.7
##   womenpar realgdpgr inflation debt_hist deficit ttl_labf labfopar unemp
## 1        0        NA      3.73     40.15    0.46  4215.00       NA  1.25
## 2        0     -0.64      2.29     38.62   -0.36  4286.00       NA  2.46
## 3        0      5.77     -0.32     38.75   -0.79  4382.00       NA  2.32
## 4        0      6.01      0.64     37.34   -0.51  4484.00       NA  1.87
## 5        0      6.26      2.87     35.31   -0.08  4610.80    67.24  1.45
## 6        0      4.99      3.41     53.99   -0.73  4745.95    67.66  1.36
##       pop pop15_64 pop65 elderly
## 1 10275.0   6296.5 874.9    8.51
## 2 10508.2   6428.6 894.6    8.51
## 3 10700.5   6571.5 913.6    8.54
## 4 10906.9   6710.9 933.0    8.55
## 5 11121.6   6857.3 948.1    8.52
## 6 11340.9   7014.6 966.3    8.52</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns a data frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a tab-delimited (“.tsv” or .”txt”) text file…</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">curl</span>(<span class="st">"https://raw.githubusercontent.com/difiore/ada-datasets/main/CPDS-1960-2014-reduced.txt"</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.table</span>(f, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">"</span><span class="sc">\t</span><span class="st">"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##   year   country gov_right1 gov_cent1 gov_left1 gov_party      elect vturn
## 1 1960 Australia        100         0         0         1             95.5
## 2 1961 Australia        100         0         0         1 09/12/1961  95.3
## 3 1962 Australia        100         0         0         1             95.3
## 4 1963 Australia        100         0         0         1 30/11/1963  95.7
## 5 1964 Australia        100         0         0         1             95.7
## 6 1965 Australia        100         0         0         1             95.7
##   womenpar realgdpgr inflation debt_hist deficit ttl_labf labfopar unemp
## 1        0        NA      3.73     40.15    0.46  4215.00       NA  1.25
## 2        0     -0.64      2.29     38.62   -0.36  4286.00       NA  2.46
## 3        0      5.77     -0.32     38.75   -0.79  4382.00       NA  2.32
## 4        0      6.01      0.64     37.34   -0.51  4484.00       NA  1.87
## 5        0      6.26      2.87     35.31   -0.08  4610.80    67.24  1.45
## 6        0      4.99      3.41     53.99   -0.73  4745.95    67.66  1.36
##       pop pop15_64 pop65 elderly
## 1 10275.0   6296.5 874.9    8.51
## 2 10508.2   6428.6 894.6    8.51
## 3 10700.5   6571.5 913.6    8.54
## 4 10906.9   6710.9 933.0    8.55
## 5 11121.6   6857.3 948.1    8.52
## 6 11340.9   7014.6 966.3    8.52</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns a data frame</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>curl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="using-the-readr-package" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="using-the-readr-package">Using the {readr} Package</h3>
<p>Using {readr}, filenames beginning with “<a href="http://" class="uri">http://</a>”, “<a href="https://" class="uri">https://</a>”, “<a href="ftp://" class="uri">ftp://</a>”, or “fttps://” can be read without having to set up a <strong>curl</strong> connection interface.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/difiore/ada-datasets/main/CPDS-1960-2014-reduced.csv"</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(f, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>## Rows: 1578 Columns: 20
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr  (2): country, elect
## dbl (18): year, gov_right1, gov_cent1, gov_left1, gov_party, vturn, womenpar...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 6 × 20
##    year country   gov_right1 gov_cent1 gov_left1 gov_party elect  vturn womenpar
##   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;    &lt;dbl&gt;
## 1  1960 Australia        100         0         0         1 &lt;NA&gt;    95.5        0
## 2  1961 Australia        100         0         0         1 09/12…  95.3        0
## 3  1962 Australia        100         0         0         1 &lt;NA&gt;    95.3        0
## 4  1963 Australia        100         0         0         1 30/11…  95.7        0
## 5  1964 Australia        100         0         0         1 &lt;NA&gt;    95.7        0
## 6  1965 Australia        100         0         0         1 &lt;NA&gt;    95.7        0
## # ℹ 11 more variables: realgdpgr &lt;dbl&gt;, inflation &lt;dbl&gt;, debt_hist &lt;dbl&gt;,
## #   deficit &lt;dbl&gt;, ttl_labf &lt;dbl&gt;, labfopar &lt;dbl&gt;, unemp &lt;dbl&gt;, pop &lt;dbl&gt;,
## #   pop15_64 &lt;dbl&gt;, pop65 &lt;dbl&gt;, elderly &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns a 'tibble', a new version of a data frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/difiore/ada-datasets/main/CPDS-1960-2014-reduced.txt"</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(f, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>## Rows: 1578 Columns: 20
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: "\t"
## chr  (2): country, elect
## dbl (18): year, gov_right1, gov_cent1, gov_left1, gov_party, vturn, womenpar...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 6 × 20
##    year country   gov_right1 gov_cent1 gov_left1 gov_party elect  vturn womenpar
##   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;    &lt;dbl&gt;
## 1  1960 Australia        100         0         0         1 &lt;NA&gt;    95.5        0
## 2  1961 Australia        100         0         0         1 09/12…  95.3        0
## 3  1962 Australia        100         0         0         1 &lt;NA&gt;    95.3        0
## 4  1963 Australia        100         0         0         1 30/11…  95.7        0
## 5  1964 Australia        100         0         0         1 &lt;NA&gt;    95.7        0
## 6  1965 Australia        100         0         0         1 &lt;NA&gt;    95.7        0
## # ℹ 11 more variables: realgdpgr &lt;dbl&gt;, inflation &lt;dbl&gt;, debt_hist &lt;dbl&gt;,
## #   deficit &lt;dbl&gt;, ttl_labf &lt;dbl&gt;, labfopar &lt;dbl&gt;, unemp &lt;dbl&gt;, pop &lt;dbl&gt;,
## #   pop15_64 &lt;dbl&gt;, pop65 &lt;dbl&gt;, elderly &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns a 'tibble', a new version of a data frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="accessing-files-on-dropbox" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="accessing-files-on-dropbox">Accessing Files on <strong><em>Dropbox</em></strong></h3>
<p>To load data from a “.csv” file located in a <em>personal</em> <strong><em>Dropbox</em></strong> account you can use the {rdrop2} package.</p>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> The {rdrop2} package has been deprecated because one of the dependencies upon which it relies - {assertive} - and, in turn, many of the dependencies upon which {assertive} relies, have not been maintained for some time. Still, it is possible with some care to install an older versions of {rdrop2} and all of its recursive dependencies from Package Archive Files downloaded from CRAN and thus get it working. It takes some time, but may be worthwhile.</p>
</blockquote>
<blockquote class="blockquote">
<p>Also note that the following code block cannot be rendered to show you the output because it requires an interactive <strong><em>R</em></strong> environment for <code>drop_auth()</code>, <code>drop_search()</code>, etc.</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rdrop2)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_auth</span>(<span class="at">new_user =</span> <span class="cn">TRUE</span>)  <span class="co"># opens a browser dialog box to ask for authorization...</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_dir</span>()  <span class="co"># lists the contents of your dropbox folder</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"CPDS-1960-2014-reduced.csv"</span>  <span class="co"># name of the file to read from</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">drop_search</span>(<span class="at">query =</span> f, <span class="at">mode =</span> <span class="st">"filename"</span>)</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="co"># searches your dropbox directory for file or directory names... this can be</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="co"># slow!</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>filenames <span class="ot">&lt;-</span> <span class="fu">vector</span>()</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(f<span class="sc">$</span>matches)) {</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>    filenames <span class="ot">&lt;-</span> <span class="fu">c</span>(filenames, f<span class="sc">$</span>matches[[i]]<span class="sc">$</span>metadata<span class="sc">$</span>path_display)</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># this is the location of the results returned above the [[i]] returns each</span></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># encountered file with a matching filename and puts them into a vector</span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">drop_read_csv</span>(filenames[<span class="dv">1</span>], <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a><span class="co"># here the [1] reads only the first file from filenames, but this can be</span></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a><span class="co"># modified this to read more than one file</span></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>rdrop2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This same process can be done to load data from other types of delimited files in <strong><em>Dropbox</em></strong> by setting the appropriate <code>sep=</code> argument.</p>
<p>You can also read text files from a <strong><em>Dropbox</em></strong> account (e.g., your own or someone else’s) using a <em>direct link</em> that can be created for any file. To create this link, you will need to choose to share the file (via the dropdown menu activated by clicking the three dots icon to the right of the filename) and then create and copy the direct link to the file.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>link <span class="ot">&lt;-</span> <span class="st">"https://www.dropbox.com/s/hes2loy1x4tikh9/CPDS-1960-2014-reduced.csv?dl=0"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can read text files from a <strong><em>Dropbox</em></strong> account (e.g., your own or someone else’s) using <em>direct link</em> for the file. To find this link, hover over the filename on <strong><em>Dropbox</em></strong> and then select “Copy link” and grab the direct link to the file.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/copy-link.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<p>You can then assign a variable to hold the link, which likely will end in <code>dl=0</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>link <span class="ot">&lt;-</span> <span class="st">"https://www.dropbox.com/scl/fi/xyhwpfzhdo42mj840pv2e/CPDS-1960-2014-reduced.csv?rlkey=3r4ck0thhgb3p8t3zwmonund5&amp;dl=0"</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: enter your link between quotation marks in lieu of this dummy link!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> Following a shared <strong><em>Dropbox</em></strong> link like this one will take you to a webpage that has the data embedded… to get <strong><em>R</em></strong> to access the raw data, you will need to change the characters at end of the link from <code>dl=0</code> to <code>dl=1</code> or to <code>raw=1</code>. That is what the <code>gsub()</code> command in the first line of code below does. Then, you can load data from that file with <code>read.csv()</code> or <code>read_csv()</code>. This</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>link <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">"dl=0"</span>, <span class="at">replacement =</span> <span class="st">"dl=1"</span>, <span class="at">x =</span> link)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(link, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co"># or, using {tidyverse}, `d &lt;-read_csv(link, col_names = TRUE)`</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can also use the <code>source_data()</code> function from the {repmis} package (“Miscellaneous Tools for Reproducible Research”) to load data from a file on <strong><em>Dropbox</em></strong>. This function detects column types and gives a few more warnings than others if it encounters somthing odd.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(repmis)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">source_data</span>(link, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co"># use the same updated link to the raw data as above</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="accessing-files-on-box" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="accessing-files-on-box">Accessing Files on <strong><em>Box</em></strong></h3>
<p>You can load tabular data from <strong><em>Box</em></strong> sites (e.g., <strong><em>UT Box</em></strong>) with {base} <strong><em>R</em></strong> <code>read.table()</code> functions using a <em>direct link</em> that someone has shared with you. To get such a link, hover over the filename on <strong><em>Box</em></strong> and click the link button to “Copy Shared Link”.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/copy-shared-link.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<p>In the dialog box that opens, select “Link Settings”…</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/link-settings.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
<p>… and then copy the direct link, which will include the file type extension for the file. It is important to get the direct link to the file rather than just copying the shared link without the file type extension!</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/copy-direct-link.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
<p>You can then assign this link to a variable and read data from it using <code>read.csv()</code> or <code>read_csv()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>link <span class="ot">&lt;-</span> <span class="st">"https://utexas.box.com/shared/static/gnu54b6qt9e6t1b93ydyevanus7m7frj.csv"</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: enter the direct link between quotation marks in lieu of this dummy</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="co"># link!</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(link, <span class="at">sep =</span> <span class="st">","</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="co"># or, using {tidyverse}, `d &lt;-read_csv(link, col_names = TRUE)`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Or, alternatively, using {repmis}…</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">source_data</span>(link, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>repmis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> The {boxr} package also provides lots of functionality to interact with files on <strong>Box</strong> directly, but setup requires an authentication process that I have not yet been able to get working!</p>
</blockquote>
</section>
<section id="importing-data-from-google-sheets" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="importing-data-from-google-sheets">Importing Data from <strong><em>Google Sheets</em></strong></h3>
<p>Finally, you can also load data directly from a <strong><em>Google Sheets</em></strong> spreadsheet into <strong><em>R</em></strong> using the {googledrive} and {googlesheets4} packages. Try saving one of the “CPDS-1960-2014-reduced” file as a Google Sheet and then extracting it into <strong><em>R</em></strong> using the code below.</p>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> The following code block cannot be rendered to show you the output because it requires an interactive <strong><em>R</em></strong> environment for several functions (e.g., <code>drive_auth()</code>).</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(googledrive)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(googlesheets4)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="fu">drive_auth</span>()  <span class="co"># authenticate access to Google Drive</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co"># usually only needed once opens a web browser and has you sign in</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gs4_auth</span>(<span class="at">token =</span> <span class="fu">drive_token</span>())  <span class="co"># apply that authentication to Google Sheets</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">gs4_find</span>() <span class="sc">%&gt;%</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"CPDS-1960-2014-reduced"</span>)</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="co"># first find all Google Sheets in your drive and then filter for one of</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="co"># interest</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="fu">gs4_get</span>(f)</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a><span class="co"># get info on the Google Sheets file selected, including the number and names</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="co"># of the different worksheets within the spreadsheet</span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(f)  <span class="co"># read data from the first sheet in the spreadsheet</span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>googlesheets4)</span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>googledrive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Follow the links below for more information on the basics of using <a href="https://googledrive.tidyverse.org/">{googledrive}</a> and <a href="https://googlesheets4.tidyverse.org/">{googlesheets4}</a>.</p>
</section>
<section id="downloading-remote-files" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="downloading-remote-files">Downloading Remote Files</h3>
<section id="dropbox" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="dropbox"><strong><em>Dropbox</em></strong></h4>
<p>The {rdrop2} package, if you are able to install it, can also be used to <strong>download</strong> a file from a personal <strong><em>Dropbox</em></strong> account to your local computer, rather than just connecting to a <strong><em>Dropbox</em></strong> file to read the data stored there. This should work with any file type. The {rdrop2} package may not be available to install via CRAN, so you may need to install the package directly from the developer’s <strong><em>GitHub</em></strong> site <a href="https://github.com/karthik/rDrop2">https://github.com/karthik/rDrop2</a>. To do so, install the package {devtools} and then run <code>devtools::install_github("karthik/rdrop2")</code></p>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> Again, the following code block cannot be rendered to show you the output because it requires an interactive <strong><em>R</em></strong> environment for <code>drop_search()</code>, etc.</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rdrop2)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"CPDS-1960-2014-reduced.csv"</span>  <span class="co"># name of file to download</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">drop_search</span>(<span class="at">query =</span> f, <span class="at">mode =</span> <span class="st">"filename"</span>)</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="co"># searches your dropbox directory for that file or directory name</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>filenames <span class="ot">&lt;-</span> <span class="fu">vector</span>()</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(f<span class="sc">$</span>matches)) {</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>    filenames <span class="ot">&lt;-</span> <span class="fu">c</span>(filenames, f<span class="sc">$</span>matches[[i]]<span class="sc">$</span>metadata<span class="sc">$</span>path_display)</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># this is the location of the results returned above the [[i]] returns each</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># encountered file with a matching filename and puts them into a vector</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_download</span>(filenames[<span class="dv">1</span>], <span class="at">local_path =</span> <span class="fu">paste0</span>(<span class="st">"data"</span>, filenames), <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="co"># here the [1] reads only the first encountered file... this can be modified</span></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a><span class="co"># this to read more than one file</span></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a><span class="co"># this function will save the file to a folder called 'data' inside the current</span></span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a><span class="co"># working directory</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>progress=TRUE</code> argument gives you a reassuring progress bar. By default, this argument is set to FALSE.</p>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> This process also works for other file types, e.g., <strong><em>Excel</em></strong> files:</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>filename <span class="ot">&lt;-</span> <span class="st">"CPDS-1960-2014-reduced.xlsx"</span>  <span class="co"># name of file to download</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">drop_search</span>(filename)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="co"># searches your dropbox directory for that file or directory name</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>filenames <span class="ot">&lt;-</span> <span class="fu">vector</span>()</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(f<span class="sc">$</span>matches)) {</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    filenames <span class="ot">&lt;-</span> <span class="fu">c</span>(filenames, f<span class="sc">$</span>matches[[i]]<span class="sc">$</span>metadata<span class="sc">$</span>path_display)</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># this is the location of the results returned above the [[i]] returns each</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># encountered file with a matching filename and puts them into a vector</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_download</span>(filenames[<span class="dv">1</span>], <span class="at">local_path =</span> <span class="fu">paste0</span>(<span class="st">"data"</span>, filenames), <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a><span class="co"># here the [1] reads only the first file...  need to modify this to read more</span></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a><span class="co"># than one file</span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a><span class="co"># this will save the file to a folder called 'data' inside the current working</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a><span class="co"># directory</span></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>rdrop2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="google-drive" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="google-drive"><strong><em>Google Drive</em></strong></h4>
<p>The {googledrive} package allows you to interact with a <strong><em>Google Drive</em></strong> account to search for, download, upload, and manipulate files.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(googledrive)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"CPDS-1960-2014-reduced.xlsx"</span>  <span class="co"># name of the file to download</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="fu">drive_auth</span>()  <span class="co"># authenticate access to Google Drive</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="co"># to download the file...</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="fu">drive_download</span>(f, <span class="at">path =</span> <span class="fu">paste0</span>(<span class="st">"data/"</span>, f), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="co"># this will save the file to a folder called 'data' inside the current working</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="co"># directory</span></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a><span class="co"># to search for a file and get info about it</span></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">drive_find</span>(<span class="at">pattern =</span> f, <span class="at">n_max =</span> <span class="dv">1</span>)</span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a><span class="co"># this example finds a single file, but this might return a tibble</span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(files)  <span class="co"># prints a list of files matching the pattern</span></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a>files<span class="sc">$</span>drive_resource  <span class="co"># shows metadata about file</span></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>id <span class="ot">&lt;-</span> files<span class="sc">$</span>id  <span class="co"># get the Google file id for the file</span></span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>id</span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a><span class="co"># to remove a file</span></span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a><span class="fu">drive_rm</span>(files)</span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a><span class="co"># to upload a file...</span></span>
<span id="cb63-26"><a href="#cb63-26" aria-hidden="true" tabindex="-1"></a><span class="fu">drive_upload</span>(<span class="fu">paste0</span>(<span class="st">"data/"</span>, f), <span class="at">name =</span> <span class="st">"CPDS-1960-2014-reduced.csv"</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb63-27"><a href="#cb63-27" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>googledrive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>More on the basics of using {googledrive} and its functionality can be found <a href="https://googledrive.tidyverse.org/">here</a>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># | include: false</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
</section>
<section id="concept-review" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="concept-review">Concept Review</h2>
<ul>
<li>There are <strong>lots and lots</strong> of ways to get data into <strong><em>R</em></strong> from a variety of sources!</li>
<li>The <code>file.choose()</code> command will allow you to browse the directory structure on your local machine</li>
<li>The {readr} and {readxl} packages contain probably the most useful functions for reading in most types of delimited data (“.csv”, “.txt”, “.tsv”, “.xlsx”)</li>
<li>We can read in or download data from remote sites on the web with {curl} or specific packages designed to work with particular hosting sites (e.g., <strong><em>GitHub</em></strong>, <strong><em>Dropbox</em></strong>, <strong><em>Box</em></strong>, <strong><em>Google Sheets</em></strong>, <strong><em>Google Drive</em></strong>)</li>
</ul>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./07-module.html" class="pagination-link  aria-label=" &lt;span="" data="" structures="" in="" ***r***&lt;="" span&gt;"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Additional Data Structures in <strong><em>R</em></strong></span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./09-module.html" class="pagination-link" aria-label="<span class='chapter-number'>9</span>&nbsp; <span class='chapter-title'>Exploratory Data Analysis</span>">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb65" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Getting Data into ***R*** {#module-08}</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## Objectives</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; The objective of this module to learn how to download data sets from various local and online sources.</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="fu">## Preliminaries</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>GO TO: <span class="ot">&lt;https://github.com/difiore/ada-datasets&gt;</span>, download the ".txt" and ".csv" versions of "Country-Data-2016", and save them locally.</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>This data set consists of basic statistics (area, current population size, birth rate, death rate, life expectancy, and form of government) for 249 countries taken from <span class="co">[</span><span class="ot">WorldData.info</span><span class="co">](https://www.worlddata.info)</span> that I have combined with data from the International Union for the Conservation of Nature (IUCN)'s <span class="co">[</span><span class="ot">Red List Summary Statistics</span><span class="co">](http://www.iucnredlist.org/about/summary-statistics)</span> about the number of threatened animal species by country.</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>From the same page, download each of the ".txt", ".csv", and ".xlsx" versions of "CPDS-1960-2014-reduced".</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>These files contain a version of the **Comparative Political Data Set (CPDS)**, which is "a collection of political and institutional country-level data provided by Prof. Dr. Klaus Armingeon and collaborators at the University of Berne. The dataset consists of annual data for 36 democratic countries for the period of 1960 to 2014 or since their transition to democracy" (Armingeon et al. 2016). The full dataset consists of 300 variables, which I have pared down to a smaller set of economical and population size variables.</span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **CITATION:** Armingeon K, Isler C, Knöpfel L, Weisstanner D, and Engler S. 2016. Comparative Political Data Set 1960-2014. Bern: Institute of Political Science, University of Berne.</span></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Install these packages in ***R***: <span class="co">[</span><span class="ot">{readxl}</span><span class="co">](https://cran.r-project.org/web/packages/readxl/readxl.pdf)</span>, <span class="co">[</span><span class="ot">{XLConnect}</span><span class="co">](https://cran.r-project.org/web/packages/XLConnect/XLConnect.pdf)</span>, <span class="co">[</span><span class="ot">{gdata}</span><span class="co">](https://cran.r-project.org/web/packages/gdata/gdata.pdf)</span>, <span class="co">[</span><span class="ot">{xlsx}</span><span class="co">](https://cran.r-project.org/web/packages/xlsx/xlsx.pdf)</span>, <span class="co">[</span><span class="ot">{curl}</span><span class="co">](https://cran.r-project.org/web/packages/curl/curl.pdf)</span>, <span class="co">[</span><span class="ot">{rdrop2}</span><span class="co">](https://cran.r-project.org/web/packages/rdrop2/rdrop2.pdf)</span>, <span class="co">[</span><span class="ot">{repmis}</span><span class="co">](https://cran.r-project.org/web/packages/repmis/repmis.pdf)</span>, <span class="co">[</span><span class="ot">{googlesheets4}</span><span class="co">](https://cran.r-project.org/web/packages/googlesheets4/googlesheets4.pdf)</span>, and <span class="co">[</span><span class="ot">{googledrive}</span><span class="co">](https://cran.r-project.org/web/packages/googledrive/googledrive.pdf)</span></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Load {tidyverse}</span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** Some of these packages (e.g., {XLConnect}, {xlsx}) require that your computer has a Java Runtime Environment (JRE) installed. A JRE is a bundle of software contaiing an interpreter and compiler for **Java** code, which is used to implement some of the functionality in the package. If your computer does not already have a JRE installed, you will need to also install one before being able to use these packages. You can download a JRE from Oracle's </span><span class="co">[</span><span class="ot">Java website</span><span class="co">](https://www.java.com/en/)</span><span class="at">.</span></span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb65-30"><a href="#cb65-30" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-31"><a href="#cb65-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-32"><a href="#cb65-32" aria-hidden="true" tabindex="-1"></a><span class="fu">## The Tao of Text</span></span>
<span id="cb65-33"><a href="#cb65-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-34"><a href="#cb65-34" aria-hidden="true" tabindex="-1"></a>So far, we have seen how to create a variety of data structures by hand (e.g., using the <span class="in">`c()`</span> function), but for larger data sets we will need mechanisms to import data into ***R***. There are many methods for importing tabular data, stored in various formats (like text files, spreadsheets, and databases).</span>
<span id="cb65-35"><a href="#cb65-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-36"><a href="#cb65-36" aria-hidden="true" tabindex="-1"></a>Plain text files are, arguably, the very best way to store data (and scripts and other documents) as they are a standard format that has been around longer than most operating systems and are unlikely to change anytime soon. Some of the benefits of using text files are listed below:</span>
<span id="cb65-37"><a href="#cb65-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-38"><a href="#cb65-38" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Plain text does not have a version and does not age.</span>
<span id="cb65-39"><a href="#cb65-39" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Plain text files are platform and software agnostic.</span>
<span id="cb65-40"><a href="#cb65-40" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Plain text files can be opened by a wide variety of programs.</span>
<span id="cb65-41"><a href="#cb65-41" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Plain text can easily be copied and pasted into a wide range of software.</span>
<span id="cb65-42"><a href="#cb65-42" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Plain text files tend to be smaller and quicker to open then proprietary formats.</span>
<span id="cb65-43"><a href="#cb65-43" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Plain text files are easy to transmit over the web.</span>
<span id="cb65-44"><a href="#cb65-44" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Many mature and efficient software tools exist for indexing, parsing, searching, and modifying text.</span>
<span id="cb65-45"><a href="#cb65-45" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The content of plain text files looks the same on any system.</span>
<span id="cb65-46"><a href="#cb65-46" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Various flavors of **Markdown** can be used for styling plain text files, if needed.</span>
<span id="cb65-47"><a href="#cb65-47" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Plain text remains itself outside of the digital context.</span>
<span id="cb65-48"><a href="#cb65-48" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**CAVEAT:** With text, we do have to think about the sometimes gnarly issue of text encoding. See <span class="co">[</span><span class="ot">this article</span><span class="co">](http://kunststube.net/encoding/)</span> or <span class="co">[</span><span class="ot">this pdf</span><span class="co">](cheatsheet/encodings.pdf)</span> for a nice overview of the issues.</span>
<span id="cb65-49"><a href="#cb65-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-50"><a href="#cb65-50" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **TL/DR**: Work with UTF-8 encoding whenever you can!</span></span>
<span id="cb65-51"><a href="#cb65-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-52"><a href="#cb65-52" aria-hidden="true" tabindex="-1"></a>&lt;br&gt;</span>
<span id="cb65-53"><a href="#cb65-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-56"><a href="#cb65-56" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-57"><a href="#cb65-57" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb65-58"><a href="#cb65-58" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "90%"</span></span>
<span id="cb65-59"><a href="#cb65-59" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"img/spreadsheets.png"</span>)</span>
<span id="cb65-60"><a href="#cb65-60" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-61"><a href="#cb65-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-62"><a href="#cb65-62" aria-hidden="true" tabindex="-1"></a><span class="fu">## Working with Local Files</span></span>
<span id="cb65-63"><a href="#cb65-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-64"><a href="#cb65-64" aria-hidden="true" tabindex="-1"></a><span class="fu">### Setting the Path to a File {.unnumbered}</span></span>
<span id="cb65-65"><a href="#cb65-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-66"><a href="#cb65-66" aria-hidden="true" tabindex="-1"></a>The <span class="in">`file.choose()`</span> command is a useful command for interactive engagement with ***R***. It gives you a familiar operating system-specific dialog box and allows you to select a file. You can use this to specify the path to a locally-stored file. The code below will assign the variable **f** to the full path to the file you choose.</span>
<span id="cb65-67"><a href="#cb65-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-70"><a href="#cb65-70" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-71"><a href="#cb65-71" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb65-72"><a href="#cb65-72" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">file.choose</span>()</span>
<span id="cb65-73"><a href="#cb65-73" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-74"><a href="#cb65-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-75"><a href="#cb65-75" aria-hidden="true" tabindex="-1"></a>Alternatively, you can directly assign a variable, e.g., **f**, to be the path to a locally-stored file. The file paths below refer to where I have saved the data files I downloaded - in a folder called <span class="in">`data/`</span> within my working directory. You may need to change this path if you have saved downloaded data to a different location on your computer.</span>
<span id="cb65-76"><a href="#cb65-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-77"><a href="#cb65-77" aria-hidden="true" tabindex="-1"></a><span class="fu">### Loading Data from Text Files {.unnumbered}</span></span>
<span id="cb65-78"><a href="#cb65-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-79"><a href="#cb65-79" aria-hidden="true" tabindex="-1"></a>In ***R***, we can load a data set from a several types of plain text file stored on a local computer using the <span class="in">`read.table()`</span> function from the {base} package, with the path to the file as the first (<span class="in">`file="&lt;path&gt;"`</span>) argument for the function. An additional argument (<span class="in">`header=&lt;boolean&gt;`</span>) can be used to specify whether the first row of the data file consists of column/field names.</span>
<span id="cb65-80"><a href="#cb65-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-81"><a href="#cb65-81" aria-hidden="true" tabindex="-1"></a>The generic <span class="in">`read.table()`</span> function can be used to read data files where columns are separated by tabs, commas, white space, or some other delimiter. The <span class="in">`sep=`</span> argument tells ***R*** what character is used as a delimiter. The <span class="in">`skip=`</span> argument can be used to start reading a file after a set number of rows.</span>
<span id="cb65-82"><a href="#cb65-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-83"><a href="#cb65-83" aria-hidden="true" tabindex="-1"></a>There are format-specific variants of <span class="in">`read.table()`</span> (e.g., <span class="in">`read.csv()`</span>) that have different defaults and may be quicker for certain file types. Note that, as mentioned in <span class="co">[</span><span class="ot">**Module 07**</span><span class="co">](#module-07)</span>, when using this function from the {base} package, the argument <span class="in">`stringsAsFactors=`</span> is set to be TRUE by default, and we need to set it as FALSE if we want character strings to be loaded as actual strings.</span>
<span id="cb65-84"><a href="#cb65-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-85"><a href="#cb65-85" aria-hidden="true" tabindex="-1"></a>As an example, we will read in some of the data sets that you have copied and stored locally in the files "CPDS-1960-2014-reduced.csv" and "CPDS-1960-2014-reduced.txt".</span>
<span id="cb65-86"><a href="#cb65-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-87"><a href="#cb65-87" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Reading comma-separated (".csv") text files with {base} ***R*** {.unnumbered}</span></span>
<span id="cb65-88"><a href="#cb65-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-91"><a href="#cb65-91" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-92"><a href="#cb65-92" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"data/CPDS-1960-2014-reduced.csv"</span></span>
<span id="cb65-93"><a href="#cb65-93" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.table</span>(f, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span><span class="st">","</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb65-94"><a href="#cb65-94" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d) <span class="co"># shows the first 6 lines of data</span></span>
<span id="cb65-95"><a href="#cb65-95" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-96"><a href="#cb65-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-97"><a href="#cb65-97" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** You can use a second argument to the </span><span class="in">`head()`</span><span class="at"> function to return a specified number of lines, e.g., </span><span class="in">`head(d, 10)`</span><span class="at">. You can also use bracket notation to display a certain range of lines, e.g., </span><span class="in">`head(d)[11:20]`</span><span class="at">.</span></span>
<span id="cb65-98"><a href="#cb65-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-99"><a href="#cb65-99" aria-hidden="true" tabindex="-1"></a>Or, alternatively...</span>
<span id="cb65-100"><a href="#cb65-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-103"><a href="#cb65-103" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-104"><a href="#cb65-104" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(f, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb65-105"><a href="#cb65-105" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb65-106"><a href="#cb65-106" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-107"><a href="#cb65-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-110"><a href="#cb65-110" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-111"><a href="#cb65-111" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(d) <span class="co"># shows the last 6 lines of data</span></span>
<span id="cb65-112"><a href="#cb65-112" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(d) <span class="co"># shows that tables are typically loaded in as data frames</span></span>
<span id="cb65-113"><a href="#cb65-113" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-114"><a href="#cb65-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-115"><a href="#cb65-115" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Reading tab-separated (".tsv", ".txt") text files with {base} ***R*** {.unnumbered}</span></span>
<span id="cb65-116"><a href="#cb65-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-117"><a href="#cb65-117" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** In the following snippet, you can change the </span><span class="in">`sep=`</span><span class="at"> argument as needed to use other delimiters</span></span>
<span id="cb65-118"><a href="#cb65-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-121"><a href="#cb65-121" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-122"><a href="#cb65-122" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"data/CPDS-1960-2014-reduced.txt"</span> <span class="co"># specfies a local path</span></span>
<span id="cb65-123"><a href="#cb65-123" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.table</span>(f, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span><span class="st">"</span><span class="sc">\t</span><span class="st">"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>, <span class="at">fill=</span><span class="cn">TRUE</span>)</span>
<span id="cb65-124"><a href="#cb65-124" aria-hidden="true" tabindex="-1"></a><span class="co"># if fill is left as the default (FALSE) then this will throw an error...</span></span>
<span id="cb65-125"><a href="#cb65-125" aria-hidden="true" tabindex="-1"></a><span class="co"># if TRUE then if the rows have unequal length, blank fields are implicitly added</span></span>
<span id="cb65-126"><a href="#cb65-126" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d) <span class="co"># shows the first 6 lines of data</span></span>
<span id="cb65-127"><a href="#cb65-127" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-128"><a href="#cb65-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-129"><a href="#cb65-129" aria-hidden="true" tabindex="-1"></a>Or, alternatively...</span>
<span id="cb65-130"><a href="#cb65-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-133"><a href="#cb65-133" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-134"><a href="#cb65-134" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(f, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb65-135"><a href="#cb65-135" aria-hidden="true" tabindex="-1"></a><span class="co"># for the `read.delim()` function, fill=TRUE by default</span></span>
<span id="cb65-136"><a href="#cb65-136" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb65-137"><a href="#cb65-137" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-138"><a href="#cb65-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-139"><a href="#cb65-139" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Reading text files with the {readr} package {.unnumbered}</span></span>
<span id="cb65-140"><a href="#cb65-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-141"><a href="#cb65-141" aria-hidden="true" tabindex="-1"></a>The {readr} package, which is loaded as part of {tidyverse} provides easy alternative functions to read in delimited text files. It runs faster than the {base} package functions. It begins by reading in an initial set of rows (a default number of 1000) from the table and then tries to impute the data class of each column. If you want, you can also directly specify the data class of each column with the <span class="in">`col_types()`</span> function. The <span class="in">`col_names=&lt;boolean&gt;`</span> argument is used to specify if your data has a header row.</span>
<span id="cb65-142"><a href="#cb65-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-143"><a href="#cb65-143" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** There are variants of the main </span><span class="in">`read_&lt;type&gt;()`</span><span class="at"> function for different types of files, e.g., tab-separated values (</span><span class="in">`read_tsv()`</span><span class="at">), comma-separated values (</span><span class="in">`read_csv()`</span><span class="at">), those with some other delimiter (</span><span class="in">`read_delim()`</span><span class="at">). A few common delimiters that might be used in text files are commas (</span><span class="in">`,`</span><span class="at">), tabs (</span><span class="in">`\t`</span><span class="at">), semicolons (</span><span class="in">`;`</span><span class="at">), and end-of-line characters, e.g., "new lines" (</span><span class="in">`\n`</span><span class="at">) or "carriage returns" (</span><span class="in">`\r`</span><span class="at">).</span></span>
<span id="cb65-144"><a href="#cb65-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-147"><a href="#cb65-147" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-148"><a href="#cb65-148" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb65-149"><a href="#cb65-149" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb65-150"><a href="#cb65-150" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"data/CPDS-1960-2014-reduced.txt"</span></span>
<span id="cb65-151"><a href="#cb65-151" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(f, <span class="at">col_names =</span> <span class="cn">TRUE</span>) <span class="co"># for tab-separated value files</span></span>
<span id="cb65-152"><a href="#cb65-152" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb65-153"><a href="#cb65-153" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(d)</span>
<span id="cb65-154"><a href="#cb65-154" aria-hidden="true" tabindex="-1"></a><span class="co"># returns d as a data frame, but also as a "tibble"</span></span>
<span id="cb65-155"><a href="#cb65-155" aria-hidden="true" tabindex="-1"></a><span class="co"># note the output is more verbose and the problems() function highlights</span></span>
<span id="cb65-156"><a href="#cb65-156" aria-hidden="true" tabindex="-1"></a><span class="co"># where there might have been parsing errors</span></span>
<span id="cb65-157"><a href="#cb65-157" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-158"><a href="#cb65-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-159"><a href="#cb65-159" aria-hidden="true" tabindex="-1"></a>Or, alternatively...</span>
<span id="cb65-160"><a href="#cb65-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-163"><a href="#cb65-163" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-164"><a href="#cb65-164" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb65-165"><a href="#cb65-165" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb65-166"><a href="#cb65-166" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(f, <span class="at">delim =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-167"><a href="#cb65-167" aria-hidden="true" tabindex="-1"></a><span class="co"># for generic delimited files, where the delimiter is a tab ("\t")</span></span>
<span id="cb65-168"><a href="#cb65-168" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb65-169"><a href="#cb65-169" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-170"><a href="#cb65-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-173"><a href="#cb65-173" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-174"><a href="#cb65-174" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"data/CPDS-1960-2014-reduced.csv"</span></span>
<span id="cb65-175"><a href="#cb65-175" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(f, <span class="at">col_names =</span> <span class="cn">TRUE</span>) <span class="co"># for comma-separated value files</span></span>
<span id="cb65-176"><a href="#cb65-176" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb65-177"><a href="#cb65-177" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-178"><a href="#cb65-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-179"><a href="#cb65-179" aria-hidden="true" tabindex="-1"></a>Or, alternatively...</span>
<span id="cb65-180"><a href="#cb65-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-183"><a href="#cb65-183" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-184"><a href="#cb65-184" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(f, <span class="at">delim =</span> <span class="st">","</span>, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-185"><a href="#cb65-185" aria-hidden="true" tabindex="-1"></a><span class="co"># for generic delimited files, where the delimiter is a comma</span></span>
<span id="cb65-186"><a href="#cb65-186" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb65-187"><a href="#cb65-187" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-188"><a href="#cb65-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-189"><a href="#cb65-189" aria-hidden="true" tabindex="-1"></a><span class="fu">### Loading Data from ***Excel*** Files {.unnumbered}</span></span>
<span id="cb65-190"><a href="#cb65-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-191"><a href="#cb65-191" aria-hidden="true" tabindex="-1"></a>While you should never need to use ***Excel***, sometimes you will no doubt be given a spreadsheet file with some data in it that you want to read in ***R***. There are several packages available that provide functions for loading data into ***R*** from ***Excel*** spreadsheet files: {readxl}, {XLConnect}, and {xlsx}. The first two of these are fast, easy to use, and work well. Both require that you have successfully installed {rJava} on your computer, which both packages import as a dependency. Be warned, sometimes installing {rJava} can be tricky! {xlsx} also may be slower than the other methods, but its <span class="in">`read.xlsx2()`</span> function may improve the speed.</span>
<span id="cb65-192"><a href="#cb65-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-193"><a href="#cb65-193" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** You shoud always use </span><span class="in">`str()`</span><span class="at"> to check if your variables come in as the correct data class!</span></span>
<span id="cb65-194"><a href="#cb65-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-195"><a href="#cb65-195" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Using the {readxl} package {.unnumbered}</span></span>
<span id="cb65-196"><a href="#cb65-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-199"><a href="#cb65-199" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-200"><a href="#cb65-200" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb65-201"><a href="#cb65-201" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"data/CPDS-1960-2014-reduced.xlsx"</span></span>
<span id="cb65-202"><a href="#cb65-202" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(f, <span class="at">sheet =</span> <span class="dv">1</span>, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-203"><a href="#cb65-203" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb65-204"><a href="#cb65-204" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d) <span class="co"># `read_excel()` yields a "tibble"</span></span>
<span id="cb65-205"><a href="#cb65-205" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>readxl)</span>
<span id="cb65-206"><a href="#cb65-206" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-207"><a href="#cb65-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-208"><a href="#cb65-208" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Using the {XLConnect} package {.unnumbered}</span></span>
<span id="cb65-209"><a href="#cb65-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-212"><a href="#cb65-212" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-213"><a href="#cb65-213" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb65-214"><a href="#cb65-214" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(XLConnect)</span>
<span id="cb65-215"><a href="#cb65-215" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"data/CPDS-1960-2014-reduced.xlsx"</span></span>
<span id="cb65-216"><a href="#cb65-216" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">readWorksheetFromFile</span>(f, <span class="at">sheet =</span> <span class="dv">1</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-217"><a href="#cb65-217" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb65-218"><a href="#cb65-218" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d)</span>
<span id="cb65-219"><a href="#cb65-219" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-220"><a href="#cb65-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-221"><a href="#cb65-221" aria-hidden="true" tabindex="-1"></a>The {XLConnect} package can also write data frames back out to ***Excel*** worksheets. If the file does not exist, it is created. If it does exist, data is cleared and overwritten. The second process is MUCH slower. In the following, I have included a conditional statement (<span class="in">`if(){}`</span>) which will implement the <span class="in">`file.remove()`</span> command here, if needed.</span>
<span id="cb65-222"><a href="#cb65-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-225"><a href="#cb65-225" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-226"><a href="#cb65-226" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb65-227"><a href="#cb65-227" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"output.xlsx"</span></span>
<span id="cb65-228"><a href="#cb65-228" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(f)) {<span class="fu">file.remove</span>(f)}</span>
<span id="cb65-229"><a href="#cb65-229" aria-hidden="true" tabindex="-1"></a><span class="fu">writeWorksheetToFile</span>(f, d, <span class="at">sheet =</span> <span class="st">"myData"</span>, <span class="at">clearSheets =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-230"><a href="#cb65-230" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>XLConnect)</span>
<span id="cb65-231"><a href="#cb65-231" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-232"><a href="#cb65-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-233"><a href="#cb65-233" aria-hidden="true" tabindex="-1"></a>For futher information on using {XLConnect} check out <span class="co">[</span><span class="ot">this blog post</span><span class="co">](http://altons.github.io/r/2015/02/13/quick-intro-to-xlconnect/#worksheet)</span>.</span>
<span id="cb65-234"><a href="#cb65-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-235"><a href="#cb65-235" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Using the {xlsx} package {.unnumbered}</span></span>
<span id="cb65-236"><a href="#cb65-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-239"><a href="#cb65-239" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-240"><a href="#cb65-240" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb65-241"><a href="#cb65-241" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xlsx)</span>
<span id="cb65-242"><a href="#cb65-242" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"data/CPDS-1960-2014-reduced.xlsx"</span></span>
<span id="cb65-243"><a href="#cb65-243" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.xlsx</span>(f, <span class="at">sheetIndex =</span> <span class="dv">1</span>)</span>
<span id="cb65-244"><a href="#cb65-244" aria-hidden="true" tabindex="-1"></a><span class="co"># or pass a named sheet using the argument `sheetIndex=`</span></span>
<span id="cb65-245"><a href="#cb65-245" aria-hidden="true" tabindex="-1"></a><span class="co"># the function `read.xlsx2()` is an updated alternative from the same package and may run faster</span></span>
<span id="cb65-246"><a href="#cb65-246" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb65-247"><a href="#cb65-247" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>xlsx)</span>
<span id="cb65-248"><a href="#cb65-248" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-249"><a href="#cb65-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-250"><a href="#cb65-250" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **TL/DR**: {readxl} seems to be the best package for *reading* ***Excel*** data, but you might need other packages and functions to *write* native ***Excel*** files (".xls" or ".xlsx").</span></span>
<span id="cb65-251"><a href="#cb65-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-252"><a href="#cb65-252" aria-hidden="true" tabindex="-1"></a><span class="fu">## Working with Remote Files</span></span>
<span id="cb65-253"><a href="#cb65-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-254"><a href="#cb65-254" aria-hidden="true" tabindex="-1"></a>We can also use ***R*** as an interface to work with data and files stored on a server elsewhere on the web, e.g., ***Dropbox***, ***GitHub***, or ***Google Drive***.</span>
<span id="cb65-255"><a href="#cb65-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-256"><a href="#cb65-256" aria-hidden="true" tabindex="-1"></a>To read ".csv" or ".txt" files directly from ***GitHub***, use the {curl} or {readr} packages.</span>
<span id="cb65-257"><a href="#cb65-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-258"><a href="#cb65-258" aria-hidden="true" tabindex="-1"></a>GO TO: <span class="ot">&lt;https://github.com/difiore/ada-datasets&gt;</span>, select the ".csv" version of the "CPDS-1960-2014-reduced" file, then press "RAW" and copy the **URL** from the address box of your browser window... this is what you need to use as an argument for the functions below (you will repeat this for the ".txt" version later on)</span>
<span id="cb65-259"><a href="#cb65-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-260"><a href="#cb65-260" aria-hidden="true" tabindex="-1"></a><span class="fu">### Using the {curl} Package {.unnumbered}</span></span>
<span id="cb65-261"><a href="#cb65-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-262"><a href="#cb65-262" aria-hidden="true" tabindex="-1"></a>The {curl} package lets us open connection across the internet to read data from a URL, which we can then couple with one of the {base} <span class="in">`read.table()`</span> functions.</span>
<span id="cb65-263"><a href="#cb65-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-264"><a href="#cb65-264" aria-hidden="true" tabindex="-1"></a>For a comma-separated value (".csv") text file...</span>
<span id="cb65-265"><a href="#cb65-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-268"><a href="#cb65-268" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-269"><a href="#cb65-269" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb65-270"><a href="#cb65-270" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb65-271"><a href="#cb65-271" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(curl)</span>
<span id="cb65-272"><a href="#cb65-272" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">curl</span>(<span class="st">"https://raw.githubusercontent.com/difiore/ada-datasets/main/CPDS-1960-2014-reduced.csv"</span>)</span>
<span id="cb65-273"><a href="#cb65-273" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(f, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb65-274"><a href="#cb65-274" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb65-275"><a href="#cb65-275" aria-hidden="true" tabindex="-1"></a><span class="co"># returns a data frame</span></span>
<span id="cb65-276"><a href="#cb65-276" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-277"><a href="#cb65-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-278"><a href="#cb65-278" aria-hidden="true" tabindex="-1"></a>For a tab-delimited (".tsv" or ."txt") text file...</span>
<span id="cb65-279"><a href="#cb65-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-282"><a href="#cb65-282" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-283"><a href="#cb65-283" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">curl</span>(<span class="st">"https://raw.githubusercontent.com/difiore/ada-datasets/main/CPDS-1960-2014-reduced.txt"</span>)</span>
<span id="cb65-284"><a href="#cb65-284" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.table</span>(f, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">"</span><span class="sc">\t</span><span class="st">"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb65-285"><a href="#cb65-285" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb65-286"><a href="#cb65-286" aria-hidden="true" tabindex="-1"></a><span class="co"># returns a data frame</span></span>
<span id="cb65-287"><a href="#cb65-287" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>curl)</span>
<span id="cb65-288"><a href="#cb65-288" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-289"><a href="#cb65-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-290"><a href="#cb65-290" aria-hidden="true" tabindex="-1"></a><span class="fu">### Using the {readr} Package {.unnumbered}</span></span>
<span id="cb65-291"><a href="#cb65-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-292"><a href="#cb65-292" aria-hidden="true" tabindex="-1"></a>Using {readr}, filenames beginning with "&lt;http://&gt;", "&lt;https://&gt;", "&lt;ftp://&gt;", or "fttps://" can be read without having to set up a **curl** connection interface.</span>
<span id="cb65-293"><a href="#cb65-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-296"><a href="#cb65-296" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-297"><a href="#cb65-297" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/difiore/ada-datasets/main/CPDS-1960-2014-reduced.csv"</span></span>
<span id="cb65-298"><a href="#cb65-298" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(f, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-299"><a href="#cb65-299" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb65-300"><a href="#cb65-300" aria-hidden="true" tabindex="-1"></a><span class="co"># returns a "tibble", a new version of a data frame</span></span>
<span id="cb65-301"><a href="#cb65-301" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-302"><a href="#cb65-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-305"><a href="#cb65-305" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-306"><a href="#cb65-306" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/difiore/ada-datasets/main/CPDS-1960-2014-reduced.txt"</span></span>
<span id="cb65-307"><a href="#cb65-307" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(f, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-308"><a href="#cb65-308" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb65-309"><a href="#cb65-309" aria-hidden="true" tabindex="-1"></a><span class="co"># returns a "tibble", a new version of a data frame</span></span>
<span id="cb65-310"><a href="#cb65-310" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-311"><a href="#cb65-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-312"><a href="#cb65-312" aria-hidden="true" tabindex="-1"></a><span class="fu">### Accessing Files on ***Dropbox*** {.unnumbered}</span></span>
<span id="cb65-313"><a href="#cb65-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-314"><a href="#cb65-314" aria-hidden="true" tabindex="-1"></a>To load data from a ".csv" file located in a *personal* ***Dropbox*** account you can use the {rdrop2} package.</span>
<span id="cb65-315"><a href="#cb65-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-316"><a href="#cb65-316" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** The {rdrop2} package has been deprecated because one of the dependencies upon which it relies - {assertive} - and, in turn, many of the dependencies upon which {assertive} relies, have not been maintained for some time. Still, it is possible with some care to install an older versions of {rdrop2} and all of its recursive dependencies from Package Archive Files downloaded from CRAN and thus get it working. It takes some time, but may be worthwhile.</span></span>
<span id="cb65-317"><a href="#cb65-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-318"><a href="#cb65-318" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Also note that the following code block cannot be rendered to show you the output because it requires an interactive ***R*** environment for </span><span class="in">`drop_auth()`</span><span class="at">, </span><span class="in">`drop_search()`</span><span class="at">, etc.</span></span>
<span id="cb65-319"><a href="#cb65-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-322"><a href="#cb65-322" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-323"><a href="#cb65-323" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb65-324"><a href="#cb65-324" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rdrop2)</span>
<span id="cb65-325"><a href="#cb65-325" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_auth</span>(<span class="at">new_user =</span> <span class="cn">TRUE</span>) <span class="co"># opens a browser dialog box to ask for authorization...</span></span>
<span id="cb65-326"><a href="#cb65-326" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_dir</span>() <span class="co"># lists the contents of your dropbox folder</span></span>
<span id="cb65-327"><a href="#cb65-327" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"CPDS-1960-2014-reduced.csv"</span> <span class="co"># name of the file to read from</span></span>
<span id="cb65-328"><a href="#cb65-328" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">drop_search</span>(<span class="at">query =</span> f, <span class="at">mode =</span> <span class="st">"filename"</span>)</span>
<span id="cb65-329"><a href="#cb65-329" aria-hidden="true" tabindex="-1"></a><span class="co"># searches your dropbox directory for file or directory names... this can be slow!</span></span>
<span id="cb65-330"><a href="#cb65-330" aria-hidden="true" tabindex="-1"></a>filenames <span class="ot">&lt;-</span> <span class="fu">vector</span>()</span>
<span id="cb65-331"><a href="#cb65-331" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(f<span class="sc">$</span>matches)) {</span>
<span id="cb65-332"><a href="#cb65-332" aria-hidden="true" tabindex="-1"></a>  filenames <span class="ot">&lt;-</span> <span class="fu">c</span>(filenames, f<span class="sc">$</span>matches[[i]]<span class="sc">$</span>metadata<span class="sc">$</span>path_display)</span>
<span id="cb65-333"><a href="#cb65-333" aria-hidden="true" tabindex="-1"></a>  <span class="co"># this is the location of the results returned above</span></span>
<span id="cb65-334"><a href="#cb65-334" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the [[i]] returns each encountered file with a matching filename and puts them into a vector</span></span>
<span id="cb65-335"><a href="#cb65-335" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-336"><a href="#cb65-336" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span></span>
<span id="cb65-337"><a href="#cb65-337" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_read_csv</span>(</span>
<span id="cb65-338"><a href="#cb65-338" aria-hidden="true" tabindex="-1"></a>    filenames[<span class="dv">1</span>],</span>
<span id="cb65-339"><a href="#cb65-339" aria-hidden="true" tabindex="-1"></a>    <span class="at">header =</span> <span class="cn">TRUE</span>,</span>
<span id="cb65-340"><a href="#cb65-340" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">","</span>,</span>
<span id="cb65-341"><a href="#cb65-341" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb65-342"><a href="#cb65-342" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb65-343"><a href="#cb65-343" aria-hidden="true" tabindex="-1"></a><span class="co"># here the [1] reads only the first file from filenames, but this can be modified this to read more than one file</span></span>
<span id="cb65-344"><a href="#cb65-344" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>rdrop2)</span>
<span id="cb65-345"><a href="#cb65-345" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-346"><a href="#cb65-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-347"><a href="#cb65-347" aria-hidden="true" tabindex="-1"></a>This same process can be done to load data from other types of delimited files in ***Dropbox*** by setting the appropriate <span class="in">`sep=`</span> argument.</span>
<span id="cb65-348"><a href="#cb65-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-349"><a href="#cb65-349" aria-hidden="true" tabindex="-1"></a>You can also read text files from a ***Dropbox*** account (e.g., your own or someone else's) using a *direct link* that can be created for any file. To create this link, you will need to choose to share the file (via the dropdown menu activated by clicking the three dots icon to the right of the filename) and then create and copy the direct link to the file.</span>
<span id="cb65-350"><a href="#cb65-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-353"><a href="#cb65-353" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-354"><a href="#cb65-354" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb65-355"><a href="#cb65-355" aria-hidden="true" tabindex="-1"></a>link <span class="ot">&lt;-</span> <span class="st">"https://www.dropbox.com/s/hes2loy1x4tikh9/CPDS-1960-2014-reduced.csv?dl=0"</span></span>
<span id="cb65-356"><a href="#cb65-356" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-357"><a href="#cb65-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-358"><a href="#cb65-358" aria-hidden="true" tabindex="-1"></a>You can read text files from a ***Dropbox*** account (e.g., your own or someone else's) using *direct link* for the file. To find this link, hover over the filename on ***Dropbox*** and then select "Copy link" and grab the direct link to the file.</span>
<span id="cb65-359"><a href="#cb65-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-362"><a href="#cb65-362" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-363"><a href="#cb65-363" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb65-364"><a href="#cb65-364" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "80%"</span></span>
<span id="cb65-365"><a href="#cb65-365" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"img/copy-link.png"</span>)</span>
<span id="cb65-366"><a href="#cb65-366" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-367"><a href="#cb65-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-368"><a href="#cb65-368" aria-hidden="true" tabindex="-1"></a>You can then assign a variable to hold the link, which likely will end in <span class="in">`dl=0`</span>.</span>
<span id="cb65-369"><a href="#cb65-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-372"><a href="#cb65-372" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-373"><a href="#cb65-373" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb65-374"><a href="#cb65-374" aria-hidden="true" tabindex="-1"></a>link <span class="ot">&lt;-</span> <span class="st">"https://www.dropbox.com/scl/fi/xyhwpfzhdo42mj840pv2e/CPDS-1960-2014-reduced.csv?rlkey=3r4ck0thhgb3p8t3zwmonund5&amp;dl=0"</span></span>
<span id="cb65-375"><a href="#cb65-375" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: enter your link between quotation marks in lieu of this dummy link!</span></span>
<span id="cb65-376"><a href="#cb65-376" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-377"><a href="#cb65-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-378"><a href="#cb65-378" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** Following a shared ***Dropbox*** link like this one will take you to a webpage that has the data embedded... to get ***R*** to access the raw data, you will need to change the characters at end of the link from </span><span class="in">`dl=0`</span><span class="at"> to </span><span class="in">`dl=1`</span><span class="at"> or to </span><span class="in">`raw=1`</span><span class="at">. That is what the </span><span class="in">`gsub()`</span><span class="at"> command in the first line of code below does. Then, you can load data from that file with </span><span class="in">`read.csv()`</span><span class="at"> or </span><span class="in">`read_csv()`</span><span class="at">. This </span></span>
<span id="cb65-379"><a href="#cb65-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-382"><a href="#cb65-382" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-383"><a href="#cb65-383" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb65-384"><a href="#cb65-384" aria-hidden="true" tabindex="-1"></a>link <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">"dl=0"</span>, <span class="at">replacement =</span> <span class="st">"dl=1"</span>, <span class="at">x =</span> link)</span>
<span id="cb65-385"><a href="#cb65-385" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span><span class="fu">read.csv</span>(link, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb65-386"><a href="#cb65-386" aria-hidden="true" tabindex="-1"></a><span class="co"># or, using {tidyverse}, `d &lt;-read_csv(link, col_names = TRUE)`</span></span>
<span id="cb65-387"><a href="#cb65-387" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb65-388"><a href="#cb65-388" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d)</span>
<span id="cb65-389"><a href="#cb65-389" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-390"><a href="#cb65-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-391"><a href="#cb65-391" aria-hidden="true" tabindex="-1"></a>You can also use the <span class="in">`source_data()`</span> function from the {repmis} package ("Miscellaneous Tools for Reproducible Research") to load data from a file on ***Dropbox***. This function detects column types and gives a few more warnings than others if it encounters somthing odd.</span>
<span id="cb65-392"><a href="#cb65-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-395"><a href="#cb65-395" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-396"><a href="#cb65-396" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb65-397"><a href="#cb65-397" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(repmis)</span>
<span id="cb65-398"><a href="#cb65-398" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">source_data</span>(link, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span><span class="st">","</span>)</span>
<span id="cb65-399"><a href="#cb65-399" aria-hidden="true" tabindex="-1"></a><span class="co"># use the same updated link to the raw data as above</span></span>
<span id="cb65-400"><a href="#cb65-400" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb65-401"><a href="#cb65-401" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d)</span>
<span id="cb65-402"><a href="#cb65-402" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-403"><a href="#cb65-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-404"><a href="#cb65-404" aria-hidden="true" tabindex="-1"></a><span class="fu">### Accessing Files on ***Box*** {.unnumbered}</span></span>
<span id="cb65-405"><a href="#cb65-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-406"><a href="#cb65-406" aria-hidden="true" tabindex="-1"></a>You can load tabular data from ***Box*** sites (e.g., ***UT Box***) with {base} ***R*** `read.table()` functions using a *direct link* that someone has shared with you. To get such a link, hover over the filename on ***Box*** and click the link button to "Copy Shared Link".</span>
<span id="cb65-407"><a href="#cb65-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-410"><a href="#cb65-410" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-411"><a href="#cb65-411" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb65-412"><a href="#cb65-412" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "80%"</span></span>
<span id="cb65-413"><a href="#cb65-413" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"img/copy-shared-link.png"</span>)</span>
<span id="cb65-414"><a href="#cb65-414" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-415"><a href="#cb65-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-416"><a href="#cb65-416" aria-hidden="true" tabindex="-1"></a>In the dialog box that opens, select "Link Settings"...</span>
<span id="cb65-417"><a href="#cb65-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-420"><a href="#cb65-420" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-421"><a href="#cb65-421" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb65-422"><a href="#cb65-422" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "50%"</span></span>
<span id="cb65-423"><a href="#cb65-423" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"img/link-settings.png"</span>)</span>
<span id="cb65-424"><a href="#cb65-424" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-425"><a href="#cb65-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-426"><a href="#cb65-426" aria-hidden="true" tabindex="-1"></a>... and then copy the direct link, which will include the file type extension for the file. It is important to get the direct link to the file rather than just copying the shared link without the file type extension!</span>
<span id="cb65-427"><a href="#cb65-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-430"><a href="#cb65-430" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-431"><a href="#cb65-431" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb65-432"><a href="#cb65-432" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "50%"</span></span>
<span id="cb65-433"><a href="#cb65-433" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"img/copy-direct-link.png"</span>)</span>
<span id="cb65-434"><a href="#cb65-434" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-435"><a href="#cb65-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-436"><a href="#cb65-436" aria-hidden="true" tabindex="-1"></a>You can then assign this link to a variable and read data from it using <span class="in">`read.csv()`</span> or <span class="in">`read_csv()`</span>.</span>
<span id="cb65-437"><a href="#cb65-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-440"><a href="#cb65-440" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-441"><a href="#cb65-441" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb65-442"><a href="#cb65-442" aria-hidden="true" tabindex="-1"></a>link <span class="ot">&lt;-</span> <span class="st">"https://utexas.box.com/shared/static/gnu54b6qt9e6t1b93ydyevanus7m7frj.csv"</span></span>
<span id="cb65-443"><a href="#cb65-443" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: enter the direct link between quotation marks in lieu of this dummy link!</span></span>
<span id="cb65-444"><a href="#cb65-444" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(link, <span class="at">sep =</span> <span class="st">","</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb65-445"><a href="#cb65-445" aria-hidden="true" tabindex="-1"></a><span class="co"># or, using {tidyverse}, `d &lt;-read_csv(link, col_names = TRUE)`</span></span>
<span id="cb65-446"><a href="#cb65-446" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-447"><a href="#cb65-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-448"><a href="#cb65-448" aria-hidden="true" tabindex="-1"></a>Or, alternatively, using {repmis}...</span>
<span id="cb65-449"><a href="#cb65-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-452"><a href="#cb65-452" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-453"><a href="#cb65-453" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb65-454"><a href="#cb65-454" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">source_data</span>(link, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span><span class="st">","</span>)</span>
<span id="cb65-455"><a href="#cb65-455" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>repmis)</span>
<span id="cb65-456"><a href="#cb65-456" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-457"><a href="#cb65-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-458"><a href="#cb65-458" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** The {boxr} package also provides lots of functionality to interact with files on **Box** directly, but setup requires an authentication process that I have not yet been able to get working!</span></span>
<span id="cb65-459"><a href="#cb65-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-460"><a href="#cb65-460" aria-hidden="true" tabindex="-1"></a><span class="fu">### Importing Data from ***Google Sheets*** {.unnumbered}</span></span>
<span id="cb65-461"><a href="#cb65-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-462"><a href="#cb65-462" aria-hidden="true" tabindex="-1"></a>Finally, you can also load data directly from a ***Google Sheets*** spreadsheet into ***R*** using the {googledrive} and {googlesheets4} packages. Try saving one of the "CPDS-1960-2014-reduced" file as a Google Sheet and then extracting it into ***R*** using the code below.</span>
<span id="cb65-463"><a href="#cb65-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-464"><a href="#cb65-464" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** The following code block cannot be rendered to show you the output because it requires an interactive ***R*** environment for several functions (e.g., </span><span class="in">`drive_auth()`</span><span class="at">).</span></span>
<span id="cb65-465"><a href="#cb65-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-468"><a href="#cb65-468" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-469"><a href="#cb65-469" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb65-470"><a href="#cb65-470" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(googledrive)</span>
<span id="cb65-471"><a href="#cb65-471" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(googlesheets4)</span>
<span id="cb65-472"><a href="#cb65-472" aria-hidden="true" tabindex="-1"></a><span class="fu">drive_auth</span>() <span class="co"># authenticate access to Google Drive</span></span>
<span id="cb65-473"><a href="#cb65-473" aria-hidden="true" tabindex="-1"></a><span class="co"># usually only needed once</span></span>
<span id="cb65-474"><a href="#cb65-474" aria-hidden="true" tabindex="-1"></a><span class="co"># opens a web browser and has you sign in</span></span>
<span id="cb65-475"><a href="#cb65-475" aria-hidden="true" tabindex="-1"></a><span class="fu">gs4_auth</span>(<span class="at">token =</span> <span class="fu">drive_token</span>()) <span class="co"># apply that authentication to Google Sheets</span></span>
<span id="cb65-476"><a href="#cb65-476" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">gs4_find</span>() <span class="sc">%&gt;%</span></span>
<span id="cb65-477"><a href="#cb65-477" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"CPDS-1960-2014-reduced"</span>)</span>
<span id="cb65-478"><a href="#cb65-478" aria-hidden="true" tabindex="-1"></a><span class="co"># first find all Google Sheets in your drive and then filter for one of interest</span></span>
<span id="cb65-479"><a href="#cb65-479" aria-hidden="true" tabindex="-1"></a><span class="fu">gs4_get</span>(f)</span>
<span id="cb65-480"><a href="#cb65-480" aria-hidden="true" tabindex="-1"></a><span class="co"># get info on the Google Sheets file selected, including the number and names of the different worksheets within the spreadsheet</span></span>
<span id="cb65-481"><a href="#cb65-481" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(f)  <span class="co"># read data from the first sheet in the spreadsheet</span></span>
<span id="cb65-482"><a href="#cb65-482" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>googlesheets4)</span>
<span id="cb65-483"><a href="#cb65-483" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>googledrive)</span>
<span id="cb65-484"><a href="#cb65-484" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-485"><a href="#cb65-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-486"><a href="#cb65-486" aria-hidden="true" tabindex="-1"></a>Follow the links below for more information on the basics of using <span class="co">[</span><span class="ot">{googledrive}</span><span class="co">](https://googledrive.tidyverse.org/)</span> and <span class="co">[</span><span class="ot">{googlesheets4}</span><span class="co">](https://googlesheets4.tidyverse.org/)</span>.</span>
<span id="cb65-487"><a href="#cb65-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-488"><a href="#cb65-488" aria-hidden="true" tabindex="-1"></a><span class="fu">### Downloading Remote Files {.unnumbered}</span></span>
<span id="cb65-489"><a href="#cb65-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-490"><a href="#cb65-490" aria-hidden="true" tabindex="-1"></a><span class="fu">#### ***Dropbox*** {.unnumbered}</span></span>
<span id="cb65-491"><a href="#cb65-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-492"><a href="#cb65-492" aria-hidden="true" tabindex="-1"></a>The {rdrop2} package, if you are able to install it, can also be used to **download** a file from a personal ***Dropbox*** account to your local computer, rather than just connecting to a ***Dropbox*** file to read the data stored there. This should work with any file type. The {rdrop2} package may not be available to install via CRAN, so you may need to install the package directly from the developer's ***GitHub*** site <span class="co">[</span><span class="ot">https://github.com/karthik/rDrop2</span><span class="co">](https://github.com/karthik/rDrop2)</span>. To do so, install the package {devtools} and then run <span class="in">`devtools::install_github("karthik/rdrop2")`</span></span>
<span id="cb65-493"><a href="#cb65-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-494"><a href="#cb65-494" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** Again, the following code block cannot be rendered to show you the output because it requires an interactive ***R*** environment for </span><span class="in">`drop_search()`</span><span class="at">, etc.</span></span>
<span id="cb65-495"><a href="#cb65-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-498"><a href="#cb65-498" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-499"><a href="#cb65-499" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb65-500"><a href="#cb65-500" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rdrop2)</span>
<span id="cb65-501"><a href="#cb65-501" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"CPDS-1960-2014-reduced.csv"</span> <span class="co"># name of file to download</span></span>
<span id="cb65-502"><a href="#cb65-502" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">drop_search</span>(<span class="at">query =</span> f, <span class="at">mode =</span> <span class="st">"filename"</span>)</span>
<span id="cb65-503"><a href="#cb65-503" aria-hidden="true" tabindex="-1"></a><span class="co"># searches your dropbox directory for that file or directory name</span></span>
<span id="cb65-504"><a href="#cb65-504" aria-hidden="true" tabindex="-1"></a>filenames <span class="ot">&lt;-</span> <span class="fu">vector</span>()</span>
<span id="cb65-505"><a href="#cb65-505" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(f<span class="sc">$</span>matches)) {</span>
<span id="cb65-506"><a href="#cb65-506" aria-hidden="true" tabindex="-1"></a>  filenames <span class="ot">&lt;-</span> <span class="fu">c</span>(filenames, f<span class="sc">$</span>matches[[i]]<span class="sc">$</span>metadata<span class="sc">$</span>path_display)</span>
<span id="cb65-507"><a href="#cb65-507" aria-hidden="true" tabindex="-1"></a>  <span class="co"># this is the location of the results returned above</span></span>
<span id="cb65-508"><a href="#cb65-508" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the [[i]] returns each encountered file with a matching filename</span></span>
<span id="cb65-509"><a href="#cb65-509" aria-hidden="true" tabindex="-1"></a>  <span class="co"># and puts them into a vector</span></span>
<span id="cb65-510"><a href="#cb65-510" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-511"><a href="#cb65-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-512"><a href="#cb65-512" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_download</span>(</span>
<span id="cb65-513"><a href="#cb65-513" aria-hidden="true" tabindex="-1"></a>  filenames[<span class="dv">1</span>],</span>
<span id="cb65-514"><a href="#cb65-514" aria-hidden="true" tabindex="-1"></a>  <span class="at">local_path =</span> <span class="fu">paste0</span>(<span class="st">"data"</span>, filenames),</span>
<span id="cb65-515"><a href="#cb65-515" aria-hidden="true" tabindex="-1"></a>  <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb65-516"><a href="#cb65-516" aria-hidden="true" tabindex="-1"></a>  <span class="at">progress =</span> <span class="cn">TRUE</span></span>
<span id="cb65-517"><a href="#cb65-517" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb65-518"><a href="#cb65-518" aria-hidden="true" tabindex="-1"></a><span class="co"># here the [1] reads only the first encountered file... this can be modified this to read more than one file</span></span>
<span id="cb65-519"><a href="#cb65-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-520"><a href="#cb65-520" aria-hidden="true" tabindex="-1"></a><span class="co"># this function will save the file to a folder called "data" inside the current working directory</span></span>
<span id="cb65-521"><a href="#cb65-521" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-522"><a href="#cb65-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-523"><a href="#cb65-523" aria-hidden="true" tabindex="-1"></a>The <span class="in">`progress=TRUE`</span> argument gives you a reassuring progress bar. By default, this argument is set to FALSE.</span>
<span id="cb65-524"><a href="#cb65-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-525"><a href="#cb65-525" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** This process also works for other file types, e.g., ***Excel*** files:</span></span>
<span id="cb65-526"><a href="#cb65-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-529"><a href="#cb65-529" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-530"><a href="#cb65-530" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb65-531"><a href="#cb65-531" aria-hidden="true" tabindex="-1"></a>filename <span class="ot">&lt;-</span> <span class="st">"CPDS-1960-2014-reduced.xlsx"</span> <span class="co"># name of file to download</span></span>
<span id="cb65-532"><a href="#cb65-532" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">drop_search</span>(filename)</span>
<span id="cb65-533"><a href="#cb65-533" aria-hidden="true" tabindex="-1"></a><span class="co"># searches your dropbox directory for that file or directory name</span></span>
<span id="cb65-534"><a href="#cb65-534" aria-hidden="true" tabindex="-1"></a>filenames <span class="ot">&lt;-</span> <span class="fu">vector</span>()</span>
<span id="cb65-535"><a href="#cb65-535" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(f<span class="sc">$</span>matches)) {</span>
<span id="cb65-536"><a href="#cb65-536" aria-hidden="true" tabindex="-1"></a>  filenames <span class="ot">&lt;-</span> <span class="fu">c</span>(filenames, f<span class="sc">$</span>matches[[i]]<span class="sc">$</span>metadata<span class="sc">$</span>path_display)</span>
<span id="cb65-537"><a href="#cb65-537" aria-hidden="true" tabindex="-1"></a>  <span class="co"># this is the location of the results returned above</span></span>
<span id="cb65-538"><a href="#cb65-538" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the [[i]] returns each encountered file with a matching filename</span></span>
<span id="cb65-539"><a href="#cb65-539" aria-hidden="true" tabindex="-1"></a>  <span class="co"># and puts them into a vector</span></span>
<span id="cb65-540"><a href="#cb65-540" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-541"><a href="#cb65-541" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_download</span>(</span>
<span id="cb65-542"><a href="#cb65-542" aria-hidden="true" tabindex="-1"></a>  filenames[<span class="dv">1</span>],</span>
<span id="cb65-543"><a href="#cb65-543" aria-hidden="true" tabindex="-1"></a>  <span class="at">local_path =</span> <span class="fu">paste0</span>(<span class="st">"data"</span>, filenames),</span>
<span id="cb65-544"><a href="#cb65-544" aria-hidden="true" tabindex="-1"></a>  <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb65-545"><a href="#cb65-545" aria-hidden="true" tabindex="-1"></a>  <span class="at">progress =</span> <span class="cn">TRUE</span></span>
<span id="cb65-546"><a href="#cb65-546" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb65-547"><a href="#cb65-547" aria-hidden="true" tabindex="-1"></a><span class="co"># here the [1] reads only the first file...</span></span>
<span id="cb65-548"><a href="#cb65-548" aria-hidden="true" tabindex="-1"></a><span class="co"># need to modify this to read more than one file</span></span>
<span id="cb65-549"><a href="#cb65-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-550"><a href="#cb65-550" aria-hidden="true" tabindex="-1"></a><span class="co"># this will save the file to a folder called "data" inside the</span></span>
<span id="cb65-551"><a href="#cb65-551" aria-hidden="true" tabindex="-1"></a><span class="co"># current working directory</span></span>
<span id="cb65-552"><a href="#cb65-552" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>rdrop2)</span>
<span id="cb65-553"><a href="#cb65-553" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-554"><a href="#cb65-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-555"><a href="#cb65-555" aria-hidden="true" tabindex="-1"></a><span class="fu">#### ***Google Drive*** {.unnumbered}</span></span>
<span id="cb65-556"><a href="#cb65-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-557"><a href="#cb65-557" aria-hidden="true" tabindex="-1"></a>The {googledrive} package allows you to interact with a ***Google Drive*** account to search for, download, upload, and manipulate files.</span>
<span id="cb65-558"><a href="#cb65-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-561"><a href="#cb65-561" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-562"><a href="#cb65-562" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb65-563"><a href="#cb65-563" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(googledrive)</span>
<span id="cb65-564"><a href="#cb65-564" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"CPDS-1960-2014-reduced.xlsx"</span> <span class="co"># name of the file to download</span></span>
<span id="cb65-565"><a href="#cb65-565" aria-hidden="true" tabindex="-1"></a><span class="fu">drive_auth</span>() <span class="co"># authenticate access to Google Drive</span></span>
<span id="cb65-566"><a href="#cb65-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-567"><a href="#cb65-567" aria-hidden="true" tabindex="-1"></a><span class="co"># to download the file...</span></span>
<span id="cb65-568"><a href="#cb65-568" aria-hidden="true" tabindex="-1"></a><span class="fu">drive_download</span>(f, <span class="at">path =</span> <span class="fu">paste0</span>(<span class="st">"data/"</span>, f), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-569"><a href="#cb65-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-570"><a href="#cb65-570" aria-hidden="true" tabindex="-1"></a><span class="co"># this will save the file to a folder called "data" inside the</span></span>
<span id="cb65-571"><a href="#cb65-571" aria-hidden="true" tabindex="-1"></a><span class="co"># current working directory</span></span>
<span id="cb65-572"><a href="#cb65-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-573"><a href="#cb65-573" aria-hidden="true" tabindex="-1"></a><span class="co"># to search for a file and get info about it</span></span>
<span id="cb65-574"><a href="#cb65-574" aria-hidden="true" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">drive_find</span>(<span class="at">pattern =</span> f, <span class="at">n_max =</span> <span class="dv">1</span>)</span>
<span id="cb65-575"><a href="#cb65-575" aria-hidden="true" tabindex="-1"></a><span class="co"># this example finds a single file, but this might return a tibble</span></span>
<span id="cb65-576"><a href="#cb65-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-577"><a href="#cb65-577" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(files) <span class="co"># prints a list of files matching the pattern</span></span>
<span id="cb65-578"><a href="#cb65-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-579"><a href="#cb65-579" aria-hidden="true" tabindex="-1"></a>files<span class="sc">$</span>drive_resource <span class="co"># shows metadata about file</span></span>
<span id="cb65-580"><a href="#cb65-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-581"><a href="#cb65-581" aria-hidden="true" tabindex="-1"></a>id <span class="ot">&lt;-</span> files<span class="sc">$</span>id <span class="co"># get the Google file id for the file</span></span>
<span id="cb65-582"><a href="#cb65-582" aria-hidden="true" tabindex="-1"></a>id</span>
<span id="cb65-583"><a href="#cb65-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-584"><a href="#cb65-584" aria-hidden="true" tabindex="-1"></a><span class="co"># to remove a file</span></span>
<span id="cb65-585"><a href="#cb65-585" aria-hidden="true" tabindex="-1"></a><span class="fu">drive_rm</span>(files)</span>
<span id="cb65-586"><a href="#cb65-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-587"><a href="#cb65-587" aria-hidden="true" tabindex="-1"></a><span class="co"># to upload a file...</span></span>
<span id="cb65-588"><a href="#cb65-588" aria-hidden="true" tabindex="-1"></a><span class="fu">drive_upload</span>(<span class="fu">paste0</span>(<span class="st">"data/"</span>, f), <span class="at">name =</span> <span class="st">"CPDS-1960-2014-reduced.csv"</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-589"><a href="#cb65-589" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>googledrive)</span>
<span id="cb65-590"><a href="#cb65-590" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-591"><a href="#cb65-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-592"><a href="#cb65-592" aria-hidden="true" tabindex="-1"></a>More on the basics of using {googledrive} and its functionality can be found <span class="co">[</span><span class="ot">here</span><span class="co">](https://googledrive.tidyverse.org/)</span>.</span>
<span id="cb65-593"><a href="#cb65-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-596"><a href="#cb65-596" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb65-597"><a href="#cb65-597" aria-hidden="true" tabindex="-1"></a><span class="co"># | include: false</span></span>
<span id="cb65-598"><a href="#cb65-598" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>tidyverse)</span>
<span id="cb65-599"><a href="#cb65-599" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb65-600"><a href="#cb65-600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-601"><a href="#cb65-601" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb65-602"><a href="#cb65-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-603"><a href="#cb65-603" aria-hidden="true" tabindex="-1"></a><span class="fu">## Concept Review {.unnumbered}</span></span>
<span id="cb65-604"><a href="#cb65-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-605"><a href="#cb65-605" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>There are **lots and lots** of ways to get data into ***R*** from a variety of sources!</span>
<span id="cb65-606"><a href="#cb65-606" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The <span class="in">`file.choose()`</span> command will allow you to browse the directory structure on your local machine</span>
<span id="cb65-607"><a href="#cb65-607" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The {readr} and {readxl} packages contain probably the most useful functions for reading in most types of delimited data (".csv", ".txt", ".tsv", ".xlsx")</span>
<span id="cb65-608"><a href="#cb65-608" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We can read in or download data from remote sites on the web with {curl} or specific packages designed to work with particular hosting sites (e.g., ***GitHub***, ***Dropbox***, ***Box***, ***Google Sheets***, ***Google Drive***)</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>